{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\components\\newsCategory\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\components\\newsCategory\\index.vue","mtime":1601375610000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/phpstudy_pro/WWW/master/view/admin/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"D:/phpstudy_pro/WWW/master/view/admin/node_modules/@babel/runtime/helpers/asyncToGenerator\"));\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar _vueWaterfallEasy = _interopRequireDefault(require(\"vue-waterfall-easy\"));\n\nvar _app = require(\"@/api/app\");\n\nvar _user = require(\"@/api/user\");\n\nvar _settings = require(\"@/settings\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'NewsCategory',\n  components: {\n    vueWaterfallEasy: _vueWaterfallEasy.default\n  },\n  props: {\n    scrollerHeight: {\n      type: String,\n      default: '100%'\n    },\n    contentTop: {\n      type: String,\n      default: '184'\n    },\n    contentWidth: {\n      type: String,\n      default: '97%'\n    },\n    maxCols: {\n      type: Number,\n      default: 7\n    },\n    isShow: {\n      type: Boolean,\n      default: false\n    },\n    isShowSend: {\n      type: Boolean,\n      default: false\n    },\n    userIds: {\n      type: String,\n      default: ''\n    },\n    wechatIds: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      roterPre: _settings.roterPre,\n      isDel: false,\n      imgsArr: [],\n      group: 0,\n      // 当前加载的加载图片的次数\n      fetchImgsArr: [],\n      // 存放每次滚动时下一批要加载的图片的数组\n      orderData: {},\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 8,\n        sm: 24,\n        xs: 24\n      },\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 8,\n        sm: 24,\n        xs: 24\n      },\n      formValidate: {\n        cate_name: '',\n        page: 1,\n        limit: 10\n      }\n    };\n  },\n  created: function created() {\n    this.getData();\n  },\n  methods: {\n    // 发送图文消息\n    send: function send(row, tit, num) {\n      var _this = this;\n\n      this.$modalSure('发送优惠券').then(function () {\n        (0, _user.userNewsApi)({\n          ids: _this.wechatIds,\n          news_id: row.wechat_news_id\n        }).then(function (_ref) {\n          var message = _ref.message;\n\n          _this.$message.success(message);\n\n          _this.$parent.handleClose();\n        }).catch(function (_ref2) {\n          var message = _ref2.message;\n\n          _this.$message.error(message);\n        });\n      });\n    },\n    clickFn: function clickFn(event, _ref3) {\n      var index = _ref3.index,\n          value = _ref3.value;\n      event.preventDefault();\n\n      if (event.target.tagName.toLowerCase() === 'div') {\n        this.$emit('getCentList', value);\n      }\n    },\n    // 删除\n    del: function del(row) {\n      var _this2 = this;\n\n      this.$modalSure().then(function () {\n        (0, _app.wechatNewsdeleteApi)(row.wechat_news_id).then(function (_ref4) {\n          var message = _ref4.message;\n\n          _this2.$message.success(message);\n\n          _this2.$nextTick(function () {\n            _this2.imgsArr = [];\n          });\n\n          _this2.formValidate.page = 1;\n\n          _this2.getData();\n        }).catch(function (_ref5) {\n          var message = _ref5.message;\n\n          _this2.$message.error(message);\n        });\n      });\n    },\n    // 删除成功\n    // submitModel () {\n    //     if (this.delfromData.title === '删除图文') {\n    //         // this.imgsArr.splice(this.delfromData.num, 1)\n    //         this.$nextTick(() => {\n    //             this.imgsArr = [];\n    //         })\n    //         this.formValidate.page = 1;\n    //         this.getData();\n    //     }\n    // },\n    // 编辑\n    clkk: function clkk(item) {\n      this.$router.push({\n        path: \"\".concat(_settings.roterPre, \"/app/wechat/newsCategory/save/\") + item.wechat_news_id\n      });\n    },\n    // 鼠标移进\n    mouseenterOut: function mouseenterOut(item) {\n      this.$set(item, 'isDel', true);\n    },\n    // 鼠标移出\n    mouseenterOver: function mouseenterOver(item) {\n      this.$set(item, 'isDel', false);\n    },\n    // 搜索\n    userSearchs: function userSearchs() {\n      var _this3 = this;\n\n      this.$nextTick(function () {\n        _this3.imgsArr = [];\n      });\n      this.formValidate.page = 1;\n      this.getData();\n    },\n    // 瀑布流数据\n    getData: function getData() {\n      var _this4 = this;\n\n      (0, _app.newsListApi)(this.formValidate).then( /*#__PURE__*/function () {\n        var _ref6 = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee(res) {\n          var num;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!(res.data.list.length === 0)) {\n                    _context.next = 5;\n                    break;\n                  }\n\n                  // 模拟已经无新数据，显示 slot=\"waterfall-over\"\n                  _this4.imgsArr = [];\n\n                  _this4.$nextTick(function () {\n                    _this4.$refs.waterfall.waterfallOver();\n                  });\n\n                  _context.next = 12;\n                  break;\n\n                case 5:\n                  num = Math.ceil(res.data.count / _this4.formValidate.limit) + 1;\n                  res.data.list.map(function (item) {\n                    item.isDel = false;\n                  });\n                  _this4.imgsArr = _this4.imgsArr.concat(res.data.list) || [];\n                  _this4.formValidate.page++;\n\n                  if (!(_this4.formValidate.page === num)) {\n                    _context.next = 12;\n                    break;\n                  }\n\n                  // 模拟已经无新数据，显示 slot=\"waterfall-over\"\n                  _this4.$refs.waterfall.waterfallOver();\n\n                  return _context.abrupt(\"return\");\n\n                case 12:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref6.apply(this, arguments);\n        };\n      }()).catch(function (res) {\n        _this4.$message.error(res.message);\n      });\n    }\n  }\n};\nexports.default = _default;",null]}