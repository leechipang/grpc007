{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\marketing\\preSale\\info.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\marketing\\preSale\\info.vue","mtime":1607484373000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _product = require(\"@/api/product\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar defaultObj = {\n  image: '',\n  slider_image: [],\n  store_name: '',\n  store_info: '',\n  keyword: '',\n  brand_id: '',\n  // 品牌id\n  cate_id: '',\n  // 平台分类id\n  mer_cate_id: [],\n  // 商户分类id\n  unit_name: '',\n  sort: 0,\n  is_show: 0,\n  is_benefit: 0,\n  is_new: 0,\n  is_good: 0,\n  temp_id: '',\n  attrValue: [{\n    image: '',\n    price: null,\n    down_price: null,\n    cost: null,\n    ot_price: null,\n    stock: null,\n    bar_code: '',\n    weight: null,\n    volume: null\n  }],\n  attr: [],\n  selectRule: '',\n  extension_type: 0,\n  content: '',\n  spec_type: 0\n};\nvar presellObj = [{\n  image: '',\n  price: null,\n  cost: null,\n  ot_price: null,\n  stock: null,\n  bar_code: '',\n  weight: null,\n  volume: null\n}];\nvar objTitle = {\n  price: {\n    title: '售价'\n  },\n  cost: {\n    title: '成本价'\n  },\n  ot_price: {\n    title: '原价'\n  },\n  stock: {\n    title: '限量'\n  },\n  bar_code: {\n    title: '商品编号'\n  },\n  weight: {\n    title: '重量（KG）'\n  },\n  volume: {\n    title: '体积(m³)'\n  }\n};\nvar objTitle2 = {\n  price: {\n    title: '售价'\n  },\n  down_price: {\n    title: '定金'\n  },\n  cost: {\n    title: '成本价'\n  },\n  ot_price: {\n    title: '原价'\n  },\n  stock: {\n    title: '限量'\n  },\n  bar_code: {\n    title: '商品编号'\n  },\n  weight: {\n    title: '重量（KG）'\n  },\n  volume: {\n    title: '体积(m³)'\n  }\n};\nvar proOptions = [{\n  name: '是否热卖',\n  value: 'is_hot'\n}, {\n  name: '优品推荐',\n  value: 'is_good'\n}, {\n  name: '促销单品',\n  value: 'is_benefit'\n}, {\n  name: '是否精品',\n  value: 'is_best'\n}, {\n  name: '是否新品',\n  value: 'is_new'\n}];\nvar _default2 = {\n  name: 'Info',\n  props: {\n    isShow: {\n      type: Boolean,\n      default: true\n    },\n    ids: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      rules: {\n        status: [{\n          required: true,\n          message: '请选择审核状态',\n          trigger: 'change'\n        }],\n        refusal: [{\n          required: true,\n          message: '请填写拒绝原因',\n          trigger: 'blur'\n        }]\n      },\n      proId: 0,\n      ruleForm: {\n        refusal: '',\n        status: 1,\n        id: ''\n      },\n      formThead: Object.assign({}, objTitle),\n      formThead2: Object.assign({}, objTitle2),\n      manyTabDate: {},\n      manyTabTit: {},\n      loading: false,\n      dialogVisible: false,\n      activeNames: 'first',\n      projectData: {},\n      recommend: proOptions,\n      checkboxGroup: [],\n      OneattrValue: [Object.assign({}, defaultObj.attrValue[0])],\n      // 单规格\n      ManyAttrValue: [Object.assign({}, defaultObj.attrValue[0])],\n      // 多规格\n      presellObj: [{\n        image: '',\n        price: null,\n        cost: null,\n        ot_price: null,\n        stock: null,\n        bar_code: '',\n        weight: null,\n        volume: null\n      }]\n    };\n  },\n  computed: {\n    attrValue: function attrValue() {\n      if (this.projectData.presell_type === 1) {\n        var obj = Object.assign({}, this.presellObj[0]);\n        delete obj.image;\n        return obj;\n      } else {\n        var _obj = Object.assign({}, defaultObj.attrValue[0]);\n\n        delete _obj.image;\n        return _obj;\n      }\n    }\n  },\n  methods: {\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      this.ruleForm.id = this.projectData.product_presell_id;\n      (0, _product.presellProductStatusApi)(this.ruleForm).then(function (res) {\n        _this.$message.success(res.message);\n\n        _this.dialogVisible = false;\n        _this.activeNames = 'first';\n\n        _this.$emit('subSuccess');\n      }).catch(function (res) {\n        _this.listLoading = false;\n\n        _this.$message.error(res.message);\n      });\n    },\n    handleClose: function handleClose() {\n      this.dialogVisible = false;\n      this.activeNames = 'first';\n    },\n    getInfo: function getInfo(id) {\n      var _this2 = this;\n\n      this.proId = id;\n      this.loading = true;\n      (0, _product.preSaleProDetailApi)(id).then(function (res) {\n        _this2.projectData = res.data;\n        var tmp = {};\n        var tmpTab = {};\n\n        _this2.projectData.attr.forEach(function (o, i) {\n          tmp['value' + i] = {\n            title: o.value\n          };\n          tmpTab['value' + i] = '';\n        });\n\n        _this2.manyTabDate = tmpTab;\n        _this2.manyTabTit = tmp;\n\n        if (_this2.projectData.presell_type === 1) {\n          //全款\n          _this2.formThead = Object.assign({}, _this2.formThead, tmp);\n\n          if (_this2.projectData.spec_type === 0) {\n            //单规格\n            _this2.OneattrValue = res.data.attrValue;\n            _this2.OneattrValue[0]['ot_price'] = _this2.OneattrValue[0]['price'];\n            _this2.OneattrValue[0]['price'] = _this2.OneattrValue[0].presellSku['presell_price'];\n            _this2.OneattrValue[0]['stock'] = _this2.OneattrValue[0].presellSku['stock'];\n          } else {\n            //多规格\n            _this2.ManyAttrValue = [];\n            res.data.attrValue.forEach(function (val, i) {\n              if (val.presellSku) {\n                _this2.ManyAttrValue.push(val);\n\n                _this2.ManyAttrValue[i]['ot_price'] = _this2.ManyAttrValue[i]['price'];\n                _this2.ManyAttrValue[i]['price'] = _this2.ManyAttrValue[i].presellSku['presell_price'];\n                _this2.ManyAttrValue[i]['stock'] = _this2.ManyAttrValue[i].presellSku['stock'];\n              }\n            });\n          }\n        } else {\n          //定金\n          _this2.formThead = Object.assign({}, _this2.formThead2, tmp);\n\n          if (_this2.projectData.spec_type === 0) {\n            //单规格\n            _this2.OneattrValue = res.data.attrValue;\n            _this2.OneattrValue[0]['ot_price'] = _this2.OneattrValue[0]['price'];\n            _this2.OneattrValue[0]['down_price'] = _this2.OneattrValue[0].presellSku['down_price'];\n            _this2.OneattrValue[0]['price'] = _this2.OneattrValue[0].presellSku['presell_price'];\n            _this2.OneattrValue[0]['stock'] = _this2.OneattrValue[0].presellSku['stock'];\n          } else {\n            //多规格\n            _this2.ManyAttrValue = [];\n            res.data.attrValue.forEach(function (val, i) {\n              if (val.presellSku) {\n                _this2.ManyAttrValue.push(val);\n\n                _this2.ManyAttrValue[i]['ot_price'] = _this2.ManyAttrValue[i]['price'];\n                _this2.ManyAttrValue[i]['price'] = _this2.ManyAttrValue[i].presellSku['presell_price'];\n                _this2.ManyAttrValue[i]['stock'] = _this2.ManyAttrValue[i].presellSku['stock'];\n                _this2.ManyAttrValue[i]['down_price'] = _this2.ManyAttrValue[i].presellSku['down_price'];\n              }\n            });\n          }\n        }\n\n        if (_this2.projectData.is_hot === 1) _this2.checkboxGroup.push('is_hot');\n        if (_this2.projectData.is_good === 1) _this2.checkboxGroup.push('is_good');\n        if (_this2.projectData.is_benefit === 1) _this2.checkboxGroup.push('is_benefit');\n        if (_this2.projectData.is_best === 1) _this2.checkboxGroup.push('is_best');\n        if (_this2.projectData.is_new === 1) _this2.checkboxGroup.push('is_new');\n        _this2.loading = false;\n      }).catch(function (res) {\n        _this2.$message.error(res.message);\n\n        _this2.loading = false;\n      });\n    }\n  }\n};\nexports.default = _default2;",null]}