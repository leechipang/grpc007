{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\api\\request.js","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\api\\request.js","mtime":1609299900000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/phpstudy_pro/WWW/master/view/admin/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _store = _interopRequireDefault(require(\"@/store\"));\n\nvar _settingMer = _interopRequireDefault(require(\"@/libs/settingMer\"));\n\nvar instance = _axios.default.create({\n  baseURL: _settingMer.default.https,\n  timeout: 60000\n});\n\nvar defaultOpt = {\n  login: true\n};\n\nfunction baseRequest(options) {\n  var token = _store.default.getters.token;\n  var headers = options.headers || {};\n\n  if (token) {\n    headers['X-Token'] = token;\n    options.headers = headers;\n  }\n\n  return new Promise(function (resolve, reject) {\n    instance(options).then(function (res) {\n      var data = res.data || {};\n\n      if (res.status !== 200) {\n        return reject({\n          message: '请求失败',\n          res: res,\n          data: data\n        });\n      }\n\n      if ([410000, 410001, 410002, 40000].indexOf(data.status) !== -1) {\n        _store.default.dispatch('user/resetToken').then(function () {\n          location.reload();\n        });\n      } else if (data.status === 200) {\n        return resolve(data, res);\n      } else {\n        return reject({\n          message: data.message,\n          res: res,\n          data: data\n        });\n      }\n    }).catch(function (message) {\n      return reject({\n        message: message\n      });\n    });\n  });\n}\n/**\n * http 请求基础类\n * 参考文档 https://www.kancloud.cn/yunye/axios/234845\n *\n */\n\n\nvar request = ['post', 'put', 'patch', 'delete'].reduce(function (request, method) {\n  /**\n   *\n   * @param url string 接口地址\n   * @param data object get参数\n   * @param options object axios 配置项\n   * @returns {AxiosPromise}\n   */\n  request[method] = function (url) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return baseRequest(Object.assign({\n      url: url,\n      data: data,\n      method: method\n    }, defaultOpt, options));\n  };\n\n  return request;\n}, {});\n['get', 'head'].forEach(function (method) {\n  /**\n   *\n   * @param url string 接口地址\n   * @param params object get参数\n   * @param options object axios 配置项\n   * @returns {AxiosPromise}\n   */\n  request[method] = function (url) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return baseRequest(Object.assign({\n      url: url,\n      params: params,\n      method: method\n    }, defaultOpt, options));\n  };\n});\nvar _default = request;\nexports.default = _default;",null]}