{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\app\\wechat\\reply\\follow\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\app\\wechat\\reply\\follow\\index.vue","mtime":1612255397000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/phpstudy_pro/WWW/master/view/admin/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"D:/phpstudy_pro/WWW/master/view/admin/node_modules/@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _auth = require(\"@/utils/auth\");\n\nvar _app = require(\"@/api/app\");\n\nvar _settings = require(\"@/settings\");\n\nvar _settingMer = _interopRequireDefault(require(\"@/libs/settingMer\"));\n\nvar _index = _interopRequireDefault(require(\"@/components/newsCategory/index.vue\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: \"Index\",\n  components: {\n    newsCategory: _index.default\n  },\n  data: function data() {\n    var _this = this;\n\n    var validateContent = function validateContent(rule, value, callback) {\n      if (_this.formValidate.type === \"text\") {\n        if (_this.formValidate.data.content === \"\") {\n          callback(new Error(\"请填写规则内容\"));\n        } else {\n          callback();\n        }\n      }\n    };\n\n    var validateSrc = function validateSrc(rule, value, callback) {\n      if (_this.formValidate.type === \"image\" && _this.formValidate.data.src === \"\") {\n        callback(new Error(\"请上传\"));\n      } else {\n        callback();\n      }\n    };\n\n    var validateVal = function validateVal(rule, value, callback) {\n      if (_this.labelarr.length === 0) {\n        callback(new Error(\"请输入后回车\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      loading: false,\n      visible: false,\n      roterPre: _settings.roterPre,\n      grid: {\n        xl: 7,\n        lg: 12,\n        md: 10,\n        sm: 24,\n        xs: 24\n      },\n      delfromData: {},\n      isShow: false,\n      maxCols: 3,\n      scrollerHeight: \"600\",\n      contentTop: \"130\",\n      contentWidth: \"98%\",\n      modals: false,\n      val: \"\",\n      formatImg: [\"jpg\", \"jpeg\", \"png\", \"bmp\", \"gif\"],\n      formatVoice: [\"mp3\", \"wma\", \"wav\", \"amr\"],\n      header: {},\n      formValidate: {\n        status: 1,\n        type: \"\",\n        key: this.$route.params.key || \"\",\n        data: {\n          content: \"\",\n          src: \"\",\n          list: []\n        }\n      },\n      ruleValidate: {\n        val: [{\n          required: true,\n          validator: validateVal,\n          trigger: \"blur\"\n        }],\n        type: [{\n          required: true,\n          message: \"请选择消息类型\",\n          trigger: \"change\"\n        }],\n        content: [{\n          required: true,\n          validator: validateContent,\n          trigger: \"blur\"\n        }],\n        src: [{\n          required: true,\n          validator: validateSrc,\n          trigger: \"change\"\n        }]\n      },\n      labelarr: [],\n      myHeaders: {\n        \"X-Token\": (0, _auth.getToken)()\n      }\n    };\n  },\n  computed: {\n    fileUrl: function fileUrl() {\n      return _settingMer.default.https + \"/wechat/reply/upload/image\";\n    },\n    voiceUrl: function voiceUrl() {\n      return _settingMer.default.https + \"/wechat/reply/upload/voice\";\n    },\n    httpsURL: function httpsURL() {\n      return _settingMer.default.httpUrl;\n    }\n  },\n  watch: {\n    $route: function $route(to, from) {\n      if (this.$route.params.key) {\n        this.formValidate.key = this.$route.params.key;\n        this.details();\n      } else {\n        this.labelarr = [];\n        this.$refs[\"formValidate\"].resetFields();\n      }\n    }\n  },\n  mounted: function mounted() {\n    if (this.$route.params.key || this.$route.params.id) {\n      this.details();\n    }\n  },\n  methods: {\n    getCentList: function getCentList(val) {\n      this.formValidate.data.list = val.article;\n      this.visible = false;\n    },\n    changePic: function changePic() {\n      this.visible = true;\n    },\n    handleClosePic: function handleClosePic() {\n      this.visible = false;\n    },\n    // 详情\n    details: function details() {\n      var _this2 = this;\n\n      (0, _app.keywordsinfoApi)(this.$route.path.indexOf(\"keyword\") !== -1 ? this.$route.params.id : this.$route.params.key, this.$route.path.indexOf(\"keyword\") !== -1 ? \"\" : 1).then( /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee(res) {\n          var info;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  info = res.data || null;\n                  _this2.formValidate = {\n                    status: info.status,\n                    type: info.type,\n                    key: info.key,\n                    data: {\n                      content: info.data.content,\n                      src: info.data.src,\n                      list: info.data.list\n                    },\n                    id: info.id\n                  };\n\n                  if (_this2.$route.params.id) {\n                    _this2.labelarr = _this2.formValidate.key.split(\",\") || [];\n                  }\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()).catch(function (res) {\n        if (res.message === \"数据不存在\") return;\n\n        _this2.$message.error(res.message);\n      });\n    },\n    // 上传成功\n    handleSuccess: function handleSuccess(response) {\n      if (response.status === 200) {\n        this.formValidate.data.src = response.data.src;\n        this.$message.success(\"上传成功\");\n      } else {\n        this.$message.error(response.message);\n      }\n    },\n    // 下拉选择\n    RuleFactor: function RuleFactor(type) {\n      switch (type) {\n        case \"text\":\n          this.formValidate.data.src = \"\";\n          this.formValidate.data.list = [];\n          break;\n\n        case \"news\":\n          this.formValidate.data.src = \"\";\n          this.formValidate.data.content = \"\";\n          break;\n\n        default:\n          this.formValidate.data.list = [];\n          this.formValidate.data.content = \"\";\n          this.formValidate.data.src = \"\";\n      } // this.$refs['formValidate'].resetFields();\n\n    },\n    handleClose: function handleClose(tag) {\n      var index = this.labelarr.indexOf(tag);\n      this.labelarr.splice(index, 1);\n    },\n    addlabel: function addlabel() {\n      var count = this.labelarr.indexOf(this.val);\n\n      if (count === -1) {\n        this.labelarr.push(this.val);\n      }\n\n      this.val = \"\";\n    },\n    // 保存\n    submenus: function submenus(name) {\n      var _this3 = this;\n\n      this.$refs[name].validate(function (valid) {\n        if (valid) {\n          _this3.loading = true;\n          _this3.formValidate.key = _this3.labelarr.join(\",\");\n\n          if (_this3.$route.path.indexOf(\"keyword\") !== -1) {\n            _this3.$route.params.id ? (0, _app.replyEditApi)(_this3.$route.params.id, _this3.formValidate).then( /*#__PURE__*/function () {\n              var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(res) {\n                return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _this3.loading = false;\n\n                        _this3.$message.success(res.message);\n\n                        _this3.$router.push({\n                          path: _this3.roterPre + \"/app/wechat/reply/keyword\"\n                        }); //   this.operation()\n\n\n                      case 3:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x2) {\n                return _ref2.apply(this, arguments);\n              };\n            }()).catch(function (res) {\n              _this3.loading = false;\n\n              _this3.$message.error(res.message);\n            }) : (0, _app.replyAddApi)(_this3.formValidate).then( /*#__PURE__*/function () {\n              var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(res) {\n                return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        _this3.loading = false;\n\n                        _this3.operation();\n\n                      case 2:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }\n                }, _callee3);\n              }));\n\n              return function (_x3) {\n                return _ref3.apply(this, arguments);\n              };\n            }()).catch(function (res) {\n              _this3.loading = false;\n\n              _this3.$message.error(res.message);\n            });\n          } else {\n            (0, _app.replySaveApi)(_this3.$route.params.key, _this3.formValidate).then( /*#__PURE__*/function () {\n              var _ref4 = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(res) {\n                return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                  while (1) {\n                    switch (_context4.prev = _context4.next) {\n                      case 0:\n                        _this3.loading = false;\n\n                        _this3.$message.success(res.message);\n\n                      case 2:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }\n                }, _callee4);\n              }));\n\n              return function (_x4) {\n                return _ref4.apply(this, arguments);\n              };\n            }()).catch(function (res) {\n              _this3.loading = false;\n\n              _this3.$message.error(res.message);\n            });\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    // 保存成功操作\n    operation: function operation() {\n      var _this4 = this;\n\n      this.$confirm(\"继续添加吗?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        setTimeout(function () {\n          _this4.labelarr = [];\n          _this4.val = \"\";\n\n          _this4.$refs[\"formValidate\"].resetFields();\n        }, 1000);\n      }).catch(function () {\n        setTimeout(function () {\n          _this4.$router.push({\n            path: \"\".concat(_settings.roterPre, \"/app/wechat/reply/keyword\")\n          });\n        }, 500);\n      }); // this.$modalSure('继续添加').then(() => {\n      //   setTimeout(() => {\n      //     this.labelarr = []\n      //     this.val = ''\n      //     this.$refs['formValidate'].resetFields()\n      //   }, 1000)\n      // }).catch(() => {\n      //   setTimeout(() => {\n      //     this.$router.push({ path: `${roterPre}/app/wechat/reply/keyword` })\n      //   }, 500)\n      // })\n    }\n  }\n};\nexports.default = _default;",null]}