{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\marketing\\preSale\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\marketing\\preSale\\detail.vue","mtime":1612255397000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es7.object.values\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _product = require(\"@/api/product\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar defaultObj = {\n  image: '',\n  slider_image: [],\n  store_name: '',\n  store_info: '',\n  keyword: '',\n  brand_id: '',\n  // 品牌id\n  cate_id: '',\n  // 平台分类id\n  mer_cate_id: [],\n  // 商户分类id\n  unit_name: '',\n  sort: 0,\n  is_show: 0,\n  is_benefit: 0,\n  is_new: 0,\n  is_good: 0,\n  temp_id: '',\n  attrValue: [{\n    image: '',\n    price: null,\n    cost: null,\n    ot_price: null,\n    stock: null,\n    bar_code: '',\n    weight: null,\n    volume: null\n  }],\n  attr: [],\n  selectRule: '',\n  extension_type: 0,\n  content: '',\n  spec_type: 0,\n  tattend_one: {},\n  tattend_two: {}\n};\nvar objTitle = {\n  price: {\n    title: '售价'\n  },\n  cost: {\n    title: '成本价'\n  },\n  ot_price: {\n    title: '原价'\n  },\n  stock: {\n    title: '库存'\n  },\n  bar_code: {\n    title: '商品编号'\n  },\n  weight: {\n    title: '重量（KG）'\n  },\n  volume: {\n    title: '体积(m³)'\n  }\n};\nvar _default2 = {\n  name: 'Info',\n  props: {\n    isShow: {\n      type: Boolean,\n      default: true\n    },\n    ids: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      rules: {\n        status: [{\n          required: true,\n          message: '请选择审核状态',\n          trigger: 'change'\n        }],\n        refusal: [{\n          required: true,\n          message: '请填写拒绝原因',\n          trigger: 'blur'\n        }]\n      },\n      proId: 0,\n      ruleForm: {\n        refusal: '',\n        status: 1,\n        id: ''\n      },\n      formThead: Object.assign({}, objTitle),\n      manyTabDate: {},\n      manyTabTit: {},\n      loading: false,\n      dialogVisible: false,\n      activeNames: 'first',\n      formValidate: {},\n      attrInfo: {},\n      OneattrValue: [Object.assign({}, defaultObj.attrValue[0])],\n      // 单规格\n      ManyAttrValue: [Object.assign({}, defaultObj.attrValue[0])] // 多规格\n\n    };\n  },\n  computed: {\n    attrValue: function attrValue() {\n      var obj = Object.assign({}, defaultObj.attrValue[0]);\n      delete obj.image;\n      return obj;\n    },\n    oneFormBatch: function oneFormBatch() {\n      var obj = [Object.assign({}, defaultObj.attrValue[0])];\n      delete obj[0].bar_code;\n      return obj;\n    }\n  },\n  methods: {\n    handleClose: function handleClose() {\n      this.dialogVisible = false;\n      this.activeNames = 'first';\n    },\n    watCh: function watCh(val) {\n      var _this = this;\n\n      var tmp = {};\n      var tmpTab = {};\n      this.formValidate.attr.forEach(function (o, i) {\n        tmp[\"value\" + i] = {\n          title: o.value\n        };\n        tmpTab[\"value\" + i] = \"\";\n      });\n      this.ManyAttrValue.forEach(function (val, index) {\n        var key = Object.values(val.detail).sort().join(\"/\");\n        if (_this.attrInfo[key]) _this.ManyAttrValue[index] = _this.attrInfo[key];\n      });\n      this.attrInfo = {};\n      this.ManyAttrValue.forEach(function (val) {\n        _this.attrInfo[Object.values(val.detail).sort().join(\"/\")] = val;\n      });\n      this.manyTabTit = tmp;\n      this.manyTabDate = tmpTab;\n      this.formThead = Object.assign({}, this.formThead, tmp); // console.log(this.formThead)\n    },\n    getInfo: function getInfo(id) {\n      var _this2 = this;\n\n      this.proId = id;\n      this.loading = true;\n      this.formValidate = {};\n      (0, _product.presellProDetailApi)(id).then(function (res) {\n        var info = res.data;\n        _this2.formValidate = {\n          product_id: info.product_id,\n          image: info.product.image,\n          store_name: info.store_name,\n          store_info: info.store_info,\n          presell_type: info.presell_type ? info.presell_type : 1,\n          delivery_type: info.delivery_type ? info.delivery_type : 1,\n          delivery_day: info.delivery_day ? info.delivery_day : 10,\n          start_time: info.start_time ? info.start_time : \"\",\n          end_time: info.end_time ? info.end_time : \"\",\n          final_start_time: info.final_start_time ? info.final_start_time : \"\",\n          final_end_time: info.final_end_time ? info.final_end_time : \"\",\n          unit_name: info.product.unit_name,\n          is_show: info.is_show,\n          attr: info.product.attr,\n          spec_type: info.product.spec_type,\n          create_time: info.create_time,\n          product: info.product,\n          tattend_one: info.tattend_one,\n          tattend_two: info.tattend_two,\n          presell_status: info.presell_status,\n          status: info.product_status,\n          pay_count: info.pay_count,\n          stock: info.stock,\n          stock_count: info.stock_count,\n          merchant: info.merchant\n        };\n\n        if (_this2.formValidate.spec_type === 0) {\n          _this2.OneattrValue = info.product.attrValue;\n          _this2.OneattrValue[0].down_price = _this2.OneattrValue[0].presellSku ? _this2.OneattrValue[0].presellSku.down_price : 0;\n          _this2.OneattrValue[0].presell_price = _this2.OneattrValue[0].presell_price ? _this2.OneattrValue[0].presellSku.presell_price : 0;\n          _this2.OneattrValue[0].sales = _this2.OneattrValue[0].presellSku ? _this2.OneattrValue[0].presellSku.seles : 0;\n        } else {\n          _this2.ManyAttrValue = [];\n          info.product.attrValue.forEach(function (val, i) {\n            if (val.presellSku) {\n              _this2.$set(val, 'down_price', val.presellSku.down_price);\n\n              _this2.$set(val, 'presell_price', val.presellSku.presell_price);\n\n              _this2.$set(val, 'sales', val.presellSku.seles);\n\n              _this2.attrInfo[Object.values(val.detail).sort().join(\"/\")] = val;\n\n              _this2.ManyAttrValue.push(val);\n            }\n          });\n\n          _this2.watCh(_this2.formValidate.attr);\n        }\n\n        console.log(_this2.ManyAttrValue);\n\n        if (_this2.formValidate.is_good === 1) {\n          _this2.checkboxGroup.push(\"is_good\");\n        }\n\n        _this2.fullscreenLoading = false;\n        _this2.formValidate.preSale_date = [info.start_time, info.end_time];\n        _this2.formValidate.finalPayment_date = [info.final_start_time, info.final_end_time];\n        _this2.loading = false;\n      }).catch(function (res) {\n        _this2.$message.error(res.message);\n\n        _this2.loading = false;\n      });\n    }\n  }\n};\nexports.default = _default2;",null]}