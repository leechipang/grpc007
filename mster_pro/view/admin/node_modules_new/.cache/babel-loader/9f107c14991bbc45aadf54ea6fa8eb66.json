{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\sms\\smsTemplate\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\sms\\smsTemplate\\index.vue","mtime":1606896719000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/phpstudy_pro/WWW/master/view/admin/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"D:/phpstudy_pro/WWW/master/view/admin/node_modules/@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"D:/phpstudy_pro/WWW/master/view/admin/node_modules/@babel/runtime/helpers/objectSpread2\"));\n\nvar _sms = require(\"@/api/sms\");\n\nvar _settings = require(\"@/settings\");\n\nvar _vuex = require(\"vuex\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'SmsTemplate',\n  filters: {\n    statusFilter: function statusFilter(status) {\n      var statusMap = {\n        0: '没有',\n        1: '有'\n      };\n      return statusMap[status];\n    }\n  },\n  data: function data() {\n    return {\n      fullscreenLoading: false,\n      listLoading: false,\n      dialogVisible: false,\n      tableData: {\n        data: [],\n        total: 0\n      },\n      form: {\n        title: '',\n        content: '',\n        type: 1\n      },\n      placeholder: {},\n      placeholderObj: [{\n        title: '例如：注册验证码',\n        content: '例如：您的验证码是：1170，有效期为1分钟。如非本人操作，可不用理会'\n      }, {\n        title: '例如：订单支付成功通知',\n        content: '例如 ：您购买的商品已支付成功，支付金额******元，订单号wx15949****6185920,感谢光临！'\n      }, {\n        title: '例如：国庆优惠活动',\n        content: '10月1日-8日期间 全场商品满1000减200，国庆欢乐购，立即查看http://mer.crmeb.net/admin.'\n      }],\n      tableFrom: {\n        page: 1,\n        limit: 20,\n        status: '',\n        temp_type: '',\n        title: ''\n      }\n    };\n  },\n  computed: (0, _objectSpread2.default)({}, (0, _vuex.mapGetters)(['isLogin'])),\n  mounted: function mounted() {\n    console.log(this.isLogin);\n\n    if (!this.isLogin) {\n      this.$router.push(_settings.roterPre + '/sms/config?url=' + this.$route.path);\n    } else {\n      this.getList();\n    }\n\n    this.changeRadioText();\n  },\n  methods: {\n    changeRadioText: function changeRadioText() {\n      this.placeholder = this.placeholderObj[this.form.type - 1];\n    },\n    // 查看是否登录\n    onIsLogin: function onIsLogin() {\n      var _this = this;\n\n      this.fullscreenLoading = true;\n      this.$store.dispatch('user/isLogin').then( /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee(res) {\n          var data;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  data = res.data;\n\n                  if (!data.status) {\n                    _this.$message.warning('请先登录');\n\n                    _this.$router.push(_settings.roterPre + '/sms/config?url=' + _this.$route.path);\n                  } else {\n                    _this.getList();\n                  }\n\n                  _this.fullscreenLoading = false;\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()).catch(function (res) {\n        _this.$message.error(res.message);\n\n        _this.$router.push(_settings.roterPre + '/sms/config?url=' + _this.$route.path);\n\n        _this.fullscreenLoading = false;\n      });\n    },\n    // 列表\n    getList: function getList() {\n      var _this2 = this;\n\n      this.listLoading = true;\n      (0, _sms.smsTempLstApi)(this.tableFrom).then(function (res) {\n        _this2.tableData.data = res.data.data;\n        _this2.tableData.total = res.data.count;\n        _this2.listLoading = false;\n      }).catch(function (res) {\n        _this2.listLoading = false;\n\n        _this2.$message.error(res.message);\n      });\n    },\n    pageChange: function pageChange(page) {\n      this.tableFrom.page = page;\n      this.getList();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.tableFrom.limit = val;\n      this.getList();\n    },\n    // 表格搜索\n    userSearchs: function userSearchs() {\n      this.getList();\n    },\n    // 申请\n    apply: function apply() {\n      this.form = {\n        title: '',\n        content: '',\n        type: 1\n      };\n      this.dialogVisible = true;\n    },\n    // 添加\n    add: function add() {\n      var _this3 = this;\n\n      /*this.$modalForm(tempCreateApi()).then(() => this.getList())*/\n      if (!this.form.title || !this.form.content) {\n        this.$message.error('请提前写完信息！');\n      } else {\n        (0, _sms.tempCreateApi)(this.form).then(function (_ref2) {\n          var message = _ref2.message;\n\n          _this3.$message.success(message);\n\n          _this3.dialogVisible = false;\n\n          _this3.getList();\n        }).catch(function (_ref3) {\n          var message = _ref3.message;\n\n          _this3.$message.error(message);\n        });\n      }\n    }\n  }\n};\nexports.default = _default;",null]}