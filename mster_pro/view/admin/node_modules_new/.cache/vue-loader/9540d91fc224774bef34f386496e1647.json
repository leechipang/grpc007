{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\promoter\\config\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\promoter\\config\\index.vue","mtime":1612255397000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { configApi, configUpdateApi, productCheckApi } from '@/api/promoter'\nexport default {\n  name: 'Index',\n  data() {\n    return {\n      promoterForm: {},\n      loading: false,\n      rules: {\n        extension_status: [\n          { required: true, message: '请选择是否启用分销', trigger: 'change' }\n        ],\n        extension_one_rate: [\n          { required: true, message: '请输入一级返佣比例', trigger: 'blur' }\n        ],\n        extension_two_rate: [\n          { required: true, message: '请输入二级返佣比例', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  mounted() {\n    this.getDetal()\n  },\n  methods: {\n    getDetal() {\n      configApi().then(res => {\n        this.promoterForm = res.data\n        this.promoterForm.extension_status = Number(res.data.extension_status)\n      }).catch((res) => {\n        this.$message.error(res.message)\n      })\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.loading = true\n          configUpdateApi(this.promoterForm).then(res => {\n            this.loading = false\n            this.$modalSure('提交成功，是否自动下架商户低于此佣金比例的商品').then(() => {\n              productCheckApi().then(({ message }) => {\n                this.$message.success(message)\n              }).catch(({ message }) => {\n                this.$message.error(message)\n              })\n            })\n          }).catch((res) => {\n            this.$message.error(res.message)\n            this.loading = false\n          })\n        } else {\n          return false\n        }\n      })\n    }\n  }\n}\n",null]}