{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\components\\newsCategory\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\components\\newsCategory\\index.vue","mtime":1601375610000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport vueWaterfallEasy from 'vue-waterfall-easy'\nimport { newsListApi, wechatNewsdeleteApi } from '@/api/app'\nimport { userNewsApi } from '@/api/user'\nimport { roterPre } from '@/settings'\nexport default {\n  name: 'NewsCategory',\n  components: {\n    vueWaterfallEasy\n  },\n  props: {\n    scrollerHeight: {\n      type: String,\n      default: '100%'\n    },\n    contentTop: {\n      type: String,\n      default: '184'\n    },\n    contentWidth: {\n      type: String,\n      default: '97%'\n    },\n    maxCols: {\n      type: Number,\n      default: 7\n    },\n    isShow: {\n      type: Boolean,\n      default: false\n    },\n    isShowSend: {\n      type: Boolean,\n      default: false\n    },\n    userIds: {\n      type: String,\n      default: ''\n    },\n    wechatIds: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      roterPre: roterPre,\n      isDel: false,\n      imgsArr: [],\n      group: 0, // 当前加载的加载图片的次数\n      fetchImgsArr: [], // 存放每次滚动时下一批要加载的图片的数组\n      orderData: {},\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 8,\n        sm: 24,\n        xs: 24\n      },\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 8,\n        sm: 24,\n        xs: 24\n      },\n      formValidate: {\n        cate_name: '',\n        page: 1,\n        limit: 10\n      }\n    }\n  },\n  created() {\n    this.getData()\n  },\n  methods: {\n    // 发送图文消息\n    send(row, tit, num) {\n      this.$modalSure('发送优惠券').then(() => {\n        userNewsApi({ ids: this.wechatIds, news_id: row.wechat_news_id }).then(({ message }) => {\n          this.$message.success(message)\n          this.$parent.handleClose()\n        }).catch(({ message }) => {\n          this.$message.error(message)\n        })\n      })\n    },\n    clickFn(event, { index, value }) {\n      event.preventDefault()\n      if (event.target.tagName.toLowerCase() === 'div') {\n        this.$emit('getCentList', value)\n      }\n    },\n    // 删除\n    del(row) {\n      this.$modalSure().then(() => {\n        wechatNewsdeleteApi(row.wechat_news_id).then(({ message }) => {\n          this.$message.success(message)\n          this.$nextTick(() => {\n            this.imgsArr = []\n          })\n          this.formValidate.page = 1\n          this.getData()\n        }).catch(({ message }) => {\n          this.$message.error(message)\n        })\n      })\n    },\n    // 删除成功\n    // submitModel () {\n    //     if (this.delfromData.title === '删除图文') {\n    //         // this.imgsArr.splice(this.delfromData.num, 1)\n    //         this.$nextTick(() => {\n    //             this.imgsArr = [];\n    //         })\n    //         this.formValidate.page = 1;\n    //         this.getData();\n    //     }\n    // },\n    // 编辑\n    clkk(item) {\n      this.$router.push({ path: `${roterPre}/app/wechat/newsCategory/save/` + item.wechat_news_id })\n    },\n    // 鼠标移进\n    mouseenterOut(item) {\n      this.$set(item, 'isDel', true)\n    },\n    // 鼠标移出\n    mouseenterOver(item) {\n      this.$set(item, 'isDel', false)\n    },\n    // 搜索\n    userSearchs() {\n      this.$nextTick(() => {\n        this.imgsArr = []\n      })\n      this.formValidate.page = 1\n      this.getData()\n    },\n    // 瀑布流数据\n    getData() {\n      newsListApi(this.formValidate).then(async res => {\n        if (res.data.list.length === 0) { // 模拟已经无新数据，显示 slot=\"waterfall-over\"\n          this.imgsArr = []\n          this.$nextTick(() => {\n            this.$refs.waterfall.waterfallOver()\n          })\n        } else {\n          const num = Math.ceil(res.data.count / this.formValidate.limit) + 1\n          res.data.list.map((item) => {\n            item.isDel = false\n          })\n          this.imgsArr = this.imgsArr.concat(res.data.list) || []\n          this.formValidate.page++\n          if (this.formValidate.page === num) { // 模拟已经无新数据，显示 slot=\"waterfall-over\"\n            this.$refs.waterfall.waterfallOver()\n            return\n          }\n        }\n      }).catch(res => {\n        this.$message.error(res.message)\n      })\n    }\n  }\n}\n",null]}