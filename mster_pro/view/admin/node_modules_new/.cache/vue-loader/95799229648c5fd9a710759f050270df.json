{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\setting\\systemAdmin\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\setting\\systemAdmin\\index.vue","mtime":1598188318000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {\r\n  adminListApi,\r\n  adminCreateApi,\r\n  adminUpdateApi,\r\n  adminDeleteApi,\r\n  adminStatusApi,\r\n  adminPasswordApi,\r\n} from \"@/api/setting\";\r\nimport { fromList } from \"@/libs/constants.js\";\r\nexport default {\r\n  name: \"SystemRole\",\r\n  data() {\r\n    return {\r\n      fromList: fromList,\r\n      grid: {\r\n        xl: 7,\r\n        lg: 7,\r\n        md: 12,\r\n        sm: 24,\r\n        xs: 24,\r\n      },\r\n      tableData: {\r\n        data: [],\r\n        total: 0,\r\n      },\r\n      listLoading: true,\r\n      tableFrom: {\r\n        page: 1,\r\n        limit: 20,\r\n        keyword: \"\",\r\n        status: \"\",\r\n        date: \"\",\r\n      },\r\n      timeVal: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    // 选择时间\r\n    selectChange(tab) {\r\n      this.tableFrom.date = tab;\r\n      this.timeVal = [];\r\n      this.tableFrom.page = 1;\r\n      this.getList();\r\n    },\r\n    // 具体日期\r\n    onchangeTime(e) {\r\n      this.timeVal = e;\r\n      this.tableFrom.date = this.timeVal ? this.timeVal.join(\"-\") : \"\";\r\n      this.tableFrom.page = 1;\r\n      this.getList();\r\n    },\r\n    // 列表\r\n    getList(num) {\r\n      this.listLoading = true;\r\n      this.tableFrom.page = num ? num : this.tableFrom.page;\r\n      adminListApi(this.tableFrom)\r\n        .then((res) => {\r\n          this.tableData.data = res.data.list;\r\n          this.tableData.total = res.data.count;\r\n          this.listLoading = false;\r\n        })\r\n        .catch((res) => {\r\n          this.tableData.data = [];\r\n          this.tableData.total = 0;\r\n          this.listLoading = false;\r\n          this.$message.error(res.message);\r\n        });\r\n    },\r\n    pageChange(page) {\r\n      this.tableFrom.page = page;\r\n      this.getList();\r\n    },\r\n    handleSizeChange(val) {\r\n      this.tableFrom.limit = val;\r\n      this.getList();\r\n    },\r\n    onchangeIsShow(row) {\r\n      adminStatusApi(row.admin_id, row.status)\r\n        .then(({ message }) => {\r\n          this.$message.success(message);\r\n        })\r\n        .catch(({ message }) => {\r\n          this.$message.error(message);\r\n        });\r\n    },\r\n    // 添加\r\n    onAdd() {\r\n      this.$modalForm(adminCreateApi()).then(() => this.getList());\r\n    },\r\n    // 编辑\r\n    onEdit(id) {\r\n      this.$modalForm(adminUpdateApi(id)).then(() => this.getList());\r\n    },\r\n    // 修改密码表单\r\n    onPassword(id) {\r\n      this.$modalForm(adminPasswordApi(id));\r\n    },\r\n    // 删除\r\n    handleDelete(id, idx) {\r\n      this.$modalSure().then(() => {\r\n        adminDeleteApi(id)\r\n          .then(({ message }) => {\r\n            this.$message.success(message);\r\n            this.tableData.data.splice(idx, 1);\r\n          })\r\n          .catch(({ message }) => {\r\n            this.$message.error(message);\r\n          });\r\n      });\r\n    },\r\n  },\r\n};\r\n",null]}