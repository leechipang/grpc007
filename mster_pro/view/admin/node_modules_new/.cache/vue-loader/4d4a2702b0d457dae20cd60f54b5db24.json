{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\sms\\smsConfig\\components\\changeSignature.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\sms\\smsConfig\\components\\changeSignature.vue","mtime":1599552558000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import { captchaApi, changeSignApi } from '@/api/sms'\nexport default {\n  name: 'changePsd',\n  data() {\n    const validatePhone = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('请填写手机号'))\n      } else if (!/^1[3456789]\\d{9}$/.test(value)) {\n        callback(new Error('手机号格式不正确!'))\n      } else {\n        callback()\n      }\n    }\n    return {\n      captchatImg: '',\n      cutNUm: '获取验证码',\n      canClick: true,\n      username: '',\n      formInline: {\n        phone: '',\n        code: '',\n        sign: ''\n      },\n      ruleInline: {\n        phone: [\n          { required: true, validator: validatePhone, trigger: 'blur' }\n        ],\n        sign: [\n          { required: true, message: '请输入短信签名', trigger: 'blur' },\n          { max: 5, message: '不能超过五个字符', trigger: 'blur' }\n        ],\n        code: [\n          { required: true, message: '请输入验证码', trigger: 'blur' }\n        ]\n      },\n      passwordType: 'password',\n      loading: false\n    }\n  },\n  created() {\n    var _this = this\n    document.onkeydown = function(e) {\n      const key = window.event.keyCode\n      if (key === 13) {\n        _this.handleSubmit('formInline')\n      }\n    }\n  },\n  methods: {\n    showPwd() {\n      if (this.passwordType === 'password') {\n        this.passwordType = ''\n      } else {\n        this.passwordType = 'password'\n      }\n      this.$nextTick(() => {\n        this.$refs.password.focus()\n      })\n    },\n    // 短信验证码\n    cutDown() {\n      if (this.formInline.phone) {\n        if (!this.canClick) return\n        this.canClick = false\n        this.cutNUm = 60\n        const data = {\n          phone: this.formInline.phone\n        }\n        captchaApi(data).then(async res => {\n          this.$message.success(res.message)\n        }).catch(res => {\n          this.$message.error(res.message)\n        })\n        const time = setInterval(() => {\n          this.cutNUm--\n          if (this.cutNUm === 0) {\n            this.cutNUm = '获取验证码'\n            this.canClick = true\n            clearInterval(time)\n          }\n        }, 1000)\n      } else {\n        this.$message.warning('请填写手机号!')\n      }\n    },\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          changeSignApi(this.formInline).then(async res => {\n            this.$message.success(res.message)\n            this.$emit('change-success')\n          }).catch(res => {\n            this.$message.error(res.message)\n          })\n        } else {\n          return false\n        }\n      })\n    },\n    goback(){\n      this.$emit('change-success')\n    }\n  }\n}\n",null]}