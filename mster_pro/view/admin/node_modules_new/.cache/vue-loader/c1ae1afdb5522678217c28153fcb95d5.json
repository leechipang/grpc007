{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\order\\orderCancellate\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\order\\orderCancellate\\index.vue","mtime":1616378529525},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  takeOrderListApi,\n  takeChartApi,\n  orderUpdateApi,\n  orderDeliveryApi,\n  exportOrderApi,\n} from \"@/api/order\";\nimport fileList from \"@/components/exportFile/fileList\";\nimport cardsData from \"@/components/cards/index\";\nexport default {\n  components: { cardsData, fileList },\n  data() {\n    return {\n      orderId: 0,\n      tableData: {\n        data: [],\n        total: 0,\n      },\n      listLoading: true,\n      tableFrom: {\n        order_sn: \"\",\n        status: \"\",\n        date: \"\",\n        page: 1,\n        limit: 20,\n        order_type: \"1\",\n        username: \"\",\n        keywords: '',\n        is_trader: ''\n      },\n      orderChartType: {},\n      timeVal: [],\n      fromList: {\n        title: \"选择时间\",\n        custom: true,\n        fromTxt: [\n          { text: \"全部\", val: \"\" },\n          { text: \"今天\", val: \"today\" },\n          { text: \"昨天\", val: \"yesterday\" },\n          { text: \"最近7天\", val: \"lately7\" },\n          { text: \"最近30天\", val: \"lately30\" },\n          { text: \"本月\", val: \"month\" },\n          { text: \"本年\", val: \"year\" },\n        ],\n      },\n      selectionList: [],\n      ids: \"\",\n      tableFromLog: {\n        page: 1,\n        limit: 10,\n      },\n      tableDataLog: {\n        data: [],\n        total: 0,\n      },\n      LogLoading: false,\n      dialogVisible: false,\n      fileVisible: false,\n      cardLists: [],\n      orderDatalist: null,\n      headeNum: [\n        { type: 1, name: \"全部\", count: 10 },\n        { type: 2, name: \"普通订单\", count: 3 },\n        { type: 3, name: \"直播订单\", count: 1 },\n        { type: 4, name: \"核销订单\", count: 2 },\n        { type: 5, name: \"拼团订单\", count: 0 },\n        { type: 6, name: \"秒杀订单\", count: 6 },\n        { type: 7, name: \"砍价订单\", count: 5 },\n      ],\n    };\n  },\n  mounted() {\n    this.headerList();\n    this.getList();\n  },\n  methods: {\n    // 导出\n    exportOrder() {\n      exportOrderApi({\n        status: this.tableFrom.status,\n        date: this.tableFrom.date,\n        take_order: 1\n      })\n        .then((res) => {\n          /*this.$message.success(res.message);\n          this.fileVisible = true;\n          this.$refs.exportList.exportFileList();*/\n          const h = this.$createElement;\n          this.$msgbox({\n            title: '提示',\n            message: h('p', null, [\n              h('span', null, '文件正在生成中，请稍后点击\"'),\n              h('span', { style: 'color: teal' }, '导出已生成列表'),\n              h('span', null, '\"查看~ '),\n            ]),\n            confirmButtonText: '我知道了',\n          }).then(action => {\n\n          });\n\n        })\n        .catch((res) => {\n          this.$message.error(res.message);\n        });\n    },\n    getExportFileList() {\n      this.fileVisible = true;\n      this.$refs.exportList.exportFileList('order');\n    },\n\n    pageChangeLog(page) {\n      this.tableFromLog.page = page;\n      this.getList();\n    },\n    handleSizeChangeLog(val) {\n      this.tableFromLog.limit = val;\n      this.getList();\n    },\n    // 打印订单\n    printOrder(id) {\n      orderPrintApi(id)\n        .then((res) => {\n          this.$message.success(res.message);\n        })\n        .catch((res) => {\n          this.$message.error(res.message);\n        });\n    },\n\n    handleSelectionChange(val) {\n      this.selectionList = val;\n      const data = [];\n      this.selectionList.map((item) => {\n        data.push(item.id);\n      });\n      this.ids = data.join(\",\");\n    },\n    // 选择时间\n    selectChange(tab) {\n      this.timeVal = [];\n      this.tableFrom.date = tab;\n      this.tableFrom.page = 1;\n      this.getList();\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e;\n      this.tableFrom.date = e ? this.timeVal.join(\"-\") : \"\";\n      this.tableFrom.page = 1;\n      this.getList();\n    },\n\n    // 列表\n    getList(num) {\n      this.listLoading = true;\n      this.tableFrom.page = num ? num : this.tableFrom.page;\n      takeOrderListApi(this.tableFrom)\n        .then((res) => {\n          this.tableData.data = res.data.list;\n          this.tableData.total = res.data.count;\n          this.cardLists = res.data.stat;\n          this.listLoading = false;\n        })\n        .catch((res) => {\n          this.$message.error(res.message);\n          this.listLoading = false;\n        });\n    },\n    pageChange(page) {\n      this.tableFrom.page = page;\n      this.getList();\n    },\n    handleSizeChange(val) {\n      this.tableFrom.limit = val;\n      this.getList();\n    },\n    headerList() {\n      takeChartApi()\n        .then((res) => {\n          this.orderChartType = res.data;\n        })\n        .catch((res) => {\n          this.$message.error(res.message);\n        });\n    },\n  },\n};\n",null]}