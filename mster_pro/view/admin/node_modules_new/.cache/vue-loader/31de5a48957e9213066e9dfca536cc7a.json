{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\userFeedback\\list\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\userFeedback\\list\\index.vue","mtime":1612255397000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  feedbackListApi,\n  feedbackReplyApi,\n  feedbackDeleteApi,\n  feedbackCategoryStatusApi,\n  changeFeedbackStatus\n} from \"@/api/userFeedback\";\nimport { changeConfigClassifyStatus } from \"@/api/system\";\nexport default {\n  name: \"Classify\",\n  data() {\n    return {\n      tableData: {\n        data: [],\n        total: 0\n      },\n      tableFrom: {\n        page: 1,\n        limit: 20,\n        keyword: \"\"\n        // type: '',\n        // realname: '',\n        // status: ''\n      },\n      listLoading: true\n    };\n  },\n  mounted() {\n    this.getList();\n  },\n  methods: {\n    // 列表\n    getList() {\n      this.listLoading = true;\n      feedbackListApi(this.tableFrom)\n        .then(res => {\n          this.tableData.data = res.data.list;\n          this.tableData.total = res.data.count;\n          this.listLoading = false;\n        })\n        .catch(res => {\n          this.listLoading = false;\n          this.$message.error(res.message);\n        });\n    },\n    pageChange(page) {\n      this.tableFrom.page = page;\n      this.getList();\n    },\n    handleSizeChange(val) {\n      this.tableFrom.limit = val;\n      this.getList();\n    },\n    onchangeIsShow(row) {\n      changeFeedbackStatus(row.feedback_id, row.status)\n        .then(({ message }) => {\n          this.$message.success(message);\n        })\n        .catch(({ message }) => {\n          this.$message.error(message);\n        });\n    },\n    // 编辑\n    onEdit(id) {\n      this.$prompt(\"备注内容\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        inputErrorMessage: \"请输入备注内容\",\n        inputType: \"textarea\",\n        inputPlaceholder: \"请输入回复内容\",\n        inputValidator: value => {\n          if (!value) {\n            return \"输入不能为空\";\n          }\n        }\n      })\n        .then(({ value }) => {\n          feedbackReplyApi(id).then(res => {\n            this.$message({\n              type: \"success\",\n              message: \"备注成功\"\n            });\n            this.getList();\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"取消输入\"\n          });\n        });\n    },\n    // 删除\n    handleDelete(id, idx) {\n      this.$modalSure().then(() => {\n        feedbackDeleteApi(id)\n          .then(({ message }) => {\n            this.$message.success(message);\n            this.tableData.data.splice(idx, 1);\n          })\n          .catch(({ message }) => {\n            this.$message.error(message);\n          });\n      });\n    }\n  }\n};\n",null]}