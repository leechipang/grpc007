{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\product\\band\\bandList\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\product\\band\\bandList\\index.vue","mtime":1598188318000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {\r\n  brandCategoryListApi,\r\n  brandListApi,\r\n  brandCreateApi,\r\n  brandUpdateApi,\r\n  brandDeleteApi,\r\n  brandStatusApi,\r\n} from \"@/api/product\";\r\nexport default {\r\n  name: \"BrandList\",\r\n  data() {\r\n    return {\r\n      props: {\r\n        value: \"store_brand_category_id\",\r\n        label: \"cate_name\",\r\n        children: \"children\",\r\n        emitPath: false,\r\n      },\r\n      isChecked: false,\r\n      listLoading: true,\r\n      tableData: {\r\n        data: [],\r\n        total: 0,\r\n      },\r\n      tableFrom: {\r\n        page: 1,\r\n        limit: 20,\r\n      },\r\n      imgList: [],\r\n      brandCategory: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getBrandCategory();\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    // 品牌分类\r\n    getBrandCategory() {\r\n      brandCategoryListApi({ page: 1, limit: 9999 })\r\n        .then((res) => {\r\n          this.brandCategory = res.data;\r\n        })\r\n        .catch((res) => {\r\n          this.$message.error(res.message);\r\n        });\r\n    },\r\n    // 列表\r\n    getList(num) {\r\n      this.listLoading = true;\r\n      this.tableFrom.page = num ? num : this.tableFrom.page;\r\n      brandListApi(this.tableFrom)\r\n        .then((res) => {\r\n          this.tableData.data = res.data.list;\r\n          this.tableData.total = res.data.count;\r\n          this.tableData.data.map((item) => {\r\n            this.imgList.push(item.pic);\r\n          });\r\n          this.listLoading = false;\r\n        })\r\n        .catch((res) => {\r\n          this.listLoading = false;\r\n          this.$message.error(res.message);\r\n        });\r\n    },\r\n    pageChange(page) {\r\n      this.tableFrom.page = page;\r\n      this.getList();\r\n    },\r\n    handleSizeChange(val) {\r\n      this.tableFrom.limit = val;\r\n      this.getList();\r\n    },\r\n    // 添加\r\n    onAdd() {\r\n      this.$modalForm(brandCreateApi()).then(() => this.getList());\r\n    },\r\n    // 编辑\r\n    onEdit(id) {\r\n      this.$modalForm(brandUpdateApi(id)).then(() => this.getList());\r\n    },\r\n    // 删除\r\n    handleDelete(id, idx) {\r\n      this.$modalSure().then(() => {\r\n        brandDeleteApi(id)\r\n          .then(({ message }) => {\r\n            this.$message.success(message);\r\n            this.getList();\r\n          })\r\n          .catch(({ message }) => {\r\n            this.$message.error(message);\r\n          });\r\n      });\r\n    },\r\n    onchangeIsShow(row) {\r\n      brandStatusApi(row.brand_id, row.is_show)\r\n        .then(({ message }) => {\r\n          this.$message.success(message);\r\n          this.getList();\r\n        })\r\n        .catch(({ message }) => {\r\n          this.$message.error(message);\r\n        });\r\n    },\r\n  },\r\n};\r\n",null]}