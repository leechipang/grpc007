{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\user\\list\\userDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\user\\list\\userDetails.vue","mtime":1615965305479},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { userOrderApi, userDetailApi, userCouponApi, userBillApi } from '@/api/user'\nexport default {\n  name: 'UserDetails',\n  props: {\n    uid: {\n      type: Number,\n      default: null\n    }\n  },\n  data() {\n    return {\n      moren: require(\"@/assets/images/f.png\"),\n      loading: false,\n      columns: [],\n      Visible: false,\n      list: [\n        { val: '0', label: '消费记录' },\n        { val: '3', label: '持有优惠券' },\n        { val: '4', label: '余额变动' }\n      ],\n      tableData: {\n        data: [],\n        total: 0\n      },\n      tableFrom: {\n        page: 1,\n        limit: 6\n      },\n      psInfo: null,\n      type: '0'\n    }\n  },\n  mounted() {\n    if (this.uid) {\n      this.getHeader()\n      this.getInfo('0')\n    }\n  },\n  methods: {\n    changeType(key) {\n      this.type = key\n      this.tableFrom.page = 1\n      this.getInfo(key)\n    },\n    getInfo(key) {\n      this.loading = true\n      switch (key) {\n        case '0':\n          userOrderApi(this.uid, this.tableFrom).then(res => {\n            this.tableData.data = res.data.list\n            this.tableData.total = res.data.count\n            this.columns = [\n              {\n                title: '订单ID',\n                key: 'order_id',\n                minWidth: 250\n              },\n              {\n                title: '收货人',\n                key: 'real_name',\n                minWidth: 90\n              },\n              {\n                title: '商品数量',\n                key: 'total_num',\n                minWidth: 80\n              },\n              {\n                title: '商品总价',\n                key: 'total_price',\n                minWidth: 90\n              },\n              {\n                title: '实付金额',\n                key: 'pay_price',\n                minWidth: 90\n              },\n              {\n                title: '交易完成时间',\n                key: 'pay_time',\n                minWidth: 160\n              }\n            ]\n            this.loading = false\n          }).catch(() => {\n            this.loading = false\n          })\n          break\n        case '3':\n          userCouponApi(this.uid, this.tableFrom).then(res => {\n            this.tableData.data = res.data.list\n            this.tableData.total = res.data.count\n            this.columns = [\n              {\n                title: '优惠券名称',\n                key: 'coupon_title',\n                minWidth: 120\n              },\n              {\n                title: '面值',\n                key: 'coupon_price',\n                minWidth: 120\n              },\n              // {\n              //   title: '有效期',\n              //   key: 'add_time',\n              //   minWidth: 120\n              // },\n              {\n                title: '最低消费额',\n                key: 'use_min_price',\n                minWidth: 120\n              },\n              {\n                title: '兑换时间',\n                key: 'use_time',\n                minWidth: 120\n              }\n            ]\n            this.loading = false\n          }).catch(() => {\n            this.loading = false\n          })\n          break\n        default:\n          userBillApi(this.uid, this.tableFrom).then(res => {\n            this.tableData.data = res.data.list\n            this.tableData.total = res.data.count\n            this.columns = [\n              {\n                title: '变动金额',\n                key: 'number',\n                minWidth: 90\n              },\n              {\n                title: '变动后',\n                key: 'balance',\n                minWidth: 90\n              },\n              {\n                title: '变动积分',\n                key: 'numbers',\n                minWidth: 90\n              },\n              {\n                title: '变动后',\n                key: 'balances',\n                minWidth: 90\n              },\n              {\n                title: '类型',\n                key: 'title',\n                minWidth: 100\n              },\n              {\n                title: '创建时间',\n                key: 'create_time',\n                minWidth: 150\n              },\n              {\n                title: '备注',\n                key: 'mark',\n                minWidth: 200\n              }\n            ]\n            this.loading = false\n          }).catch(() => {\n            this.loading = false\n          })\n      }\n    },\n    pageChange(page) {\n      this.tableFrom.page = page\n      this.getInfo(this.type)\n    },\n    handleSizeChange(val) {\n      this.tableFrom.limit = val\n      this.getInfo(this.type)\n    },\n    getHeader() {\n      userDetailApi(this.uid).then(res => {\n        this.psInfo = res.data\n      })\n    }\n  }\n}\n",null]}