{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\dashboard\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\dashboard\\index.vue","mtime":1612255397000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { merchantStockApi, merchantVisitApi } from \"@/api/home\";\nimport { checkAuthApi, authTypeApi } from \"@/api/maintain\";\nimport { mapGetters } from \"vuex\";\nimport baseInfo from \"./components/baseInfo\";\nimport toDay from \"./components/toDay\";\nimport myRanking from \"./components/ranking\";\nimport merchantRate from \"./components/merchantRate\";\nimport userData from \"./components/userData\";\nimport userFrom from \"./components/user\";\nimport Cookies from \"js-cookie\";\nexport default {\n  name: \"Dashboard\",\n  components: { baseInfo, toDay, myRanking, merchantRate, userData, userFrom },\n  data() {\n    return {\n      merTitle: \"商品销量排行\",\n      visitTitle: \"商户访客量排行\",\n      currentRole: \"adminDashboard\",\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 24\n      },\n      merchantStock: [],\n      merchantVisit: []\n    };\n  },\n  computed: {\n    ...mapGetters([\"roles\"])\n  },\n  mounted() {\n    console.log(!Cookies.get(\"auth\"));\n    this.getAuth();\n    this.getList(\"lately30\");\n    this.getVisit(\"lately30\");\n    if (!Cookies.get(\"auth\")) {\n      checkAuthApi()\n        .then(res => {\n          if (res.message !== \"success\") {\n            return this.$notify.warning({\n              title: \"授权提醒\",\n              duration: 0,\n              dangerouslyUseHTMLString: true,\n              message: res.message,\n              render: h => {\n                return h(\"div\", [\n                  h(\n                    \"a\",\n                    {\n                      attrs: {\n                        href:\n                          \"http://www.crmeb.com/home/grant/applyauthorize.html\",\n                        target: \"_blank\"\n                      }\n                    },\n                    res.message\n                  )\n                ]);\n              },\n              onClose() {\n                Cookies.set(\"auth\", true);\n              }\n            });\n          }\n        })\n        .catch(res => {});\n    } else {\n    }\n  },\n  methods: {\n    getAuth() {\n      authTypeApi()\n        .then(res => {\n          const data = res.data || {};\n          if (data.auth_code && data.auth) {\n            this.authCode = data.auth_code;\n            this.auth = true;\n          }\n        })\n        .catch(({ message }) => {\n          this.$message.error(message);\n        });\n    },\n    // 商品销量\n    getList(val) {\n      merchantStockApi({ date: val })\n        .then(res => {\n          if (res.status === 200) {\n            this.merchantStock = res.data.list;\n          }\n        })\n        .catch(res => {\n          this.$message.error(res.message);\n        });\n    },\n    // 商户访客量\n    getVisit(val) {\n      merchantVisitApi({ date: val })\n        .then(res => {\n          if (res.status === 200) {\n            this.merchantVisit = res.data.list;\n          }\n        })\n        .catch(res => {\n          this.$message.error(res.message);\n        });\n    }\n  }\n};\n",null]}