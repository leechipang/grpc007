{"remainingRequest":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\dashboard\\components\\user.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\src\\views\\dashboard\\components\\user.vue","mtime":1606896719000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\phpstudy_pro\\WWW\\master\\view\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n    merchantUserApi,\n    userRateApi\n} from '@/api/home'\nimport echartsFrom from '@/components/echarts/index'\nexport default {\n    name: 'User',\n    components: {\n        echartsFrom\n    },\n    data() {\n        return {\n            fullWidth: document.body.clientWidth,\n            style: {\n                height: '200px'\n            },\n            name: '最近30天',\n            users: null,\n            nameRate: '最近30天',\n            nameVal: 'lately30',\n            usersRate: {},\n            rateType: 'price',\n            optionData: {},\n            fromList: {\n                title: '选择时间',\n                custom: true,\n                fromTxt: [{\n                        text: '今天',\n                        val: 'today'\n                    },\n                    {\n                        text: '昨天',\n                        val: 'yesterday'\n                    },\n                    {\n                        text: '最近7天',\n                        val: 'lately7'\n                    },\n                    {\n                        text: '最近30天',\n                        val: 'lately30'\n                    },\n                    {\n                        text: '本月',\n                        val: 'month'\n                    },\n                    {\n                        text: '本年',\n                        val: 'year'\n                    }\n                ]\n            }\n        }\n    },\n    mounted() {\n        this.getList('lately30')\n        this.getRate('lately30')\n    },\n    created() {\n        window.addEventListener('resize', this.handleResize)\n    },\n    beforeDestroy: function () {\n        window.removeEventListener('resize', this.handleResize)\n    },\n    methods: {\n        handleResize(event) {\n            this.fullWidth = document.body.clientWidth\n        },\n        setTime(val, text) {\n            this.name = text\n            this.getList(val)\n        },\n        getList(val) {\n            merchantUserApi({\n                date: val\n            }).then(res => {\n                this.users = res.data\n            }).catch(res => {\n                this.$message.error(res.message)\n            })\n        },\n        setTimeRate(val, text) {\n            this.nameVal = val;\n            this.nameRate = text\n            this.getRate(val)\n        },\n        changeRate() {\n            this.getRate(this.nameVal)\n        },\n        getRate(val) {\n            userRateApi({\n                date: val\n            }).then(res => {              \n                if(res.status === 200){\n                    let seriesData = []\n                    this.usersRate = res.data\n                    this.rateType === 'price' ? seriesData = [{\n                        value: this.usersRate.newTotalPrice,\n                        name: '新成交用户',\n                        itemStyle: {\n                            normal: {\n                                color: '#4ECB73'\n                            }\n                        }\n                    }, {\n                        value: this.usersRate.oldTotalPrice,\n                        name: '老用户',\n                        itemStyle: {\n                            normal: {\n                                color: '#39A1FF'\n                            }\n                        }\n                    }] : seriesData = [{\n                        value: this.usersRate.newUser,\n                        name: '新成交用户',\n                        itemStyle: {\n                            normal: {\n                                color: '#4ECB73'\n                            }\n                        }\n                    }, {\n                        value: this.usersRate.oldUser,\n                        name: '老用户',\n                        itemStyle: {\n                            normal: {\n                                color: '#39A1FF'\n                            }\n                        }\n                    }]\n                    this.optionData = {\n                        tooltip: {\n                            trigger: 'item',\n                            formatter: '{a} <br/>{b} : {c} ({d}%)'\n                        },\n                        legend: {\n                            orient: 'vertical',\n                            left: 'left',\n                            data: ['新成交用户', '老用户']\n                        },\n                        series: [{\n                            name: '访问来源',\n                            type: 'pie',\n                            radius: '65%',\n                            center: ['50%', '65%'],\n                            data: seriesData,\n                            emphasis: {\n                                itemStyle: {\n                                    shadowBlur: 10,\n                                    shadowOffsetX: 0,\n                                    shadowColor: 'rgba(0, 0, 0, 0.5)'\n                                }\n                            }\n                        }]\n                    }\n                    }\n            }).catch(res => {\n                this.$message.error(res.message)\n            })\n        }\n    }\n}\n",null]}