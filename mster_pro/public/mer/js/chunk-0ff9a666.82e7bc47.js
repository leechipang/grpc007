(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ff9a666"],{2865:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"divBox"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-steps",{attrs:{active:e.currentTab,"align-center":"","finish-status":"success"}},[a("el-step",{attrs:{title:"商品信息"}}),e._v(" "),a("el-step",{attrs:{title:"商品详情"}}),e._v(" "),a("el-step",{attrs:{title:"其他设置"}}),e._v(" "),a("el-step",{attrs:{title:"规格设置"}})],1)],1),e._v(" "),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.fullscreenLoading,expression:"fullscreenLoading"}],ref:"formValidate",staticClass:"formValidate mt20",attrs:{rules:e.ruleValidate,model:e.formValidate,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:0===e.currentTab,expression:"currentTab === 0"}],attrs:{gutter:24}},[a("el-col",e._b({},"el-col",e.grid2,!1),[a("el-form-item",{attrs:{label:"商品名称：",prop:"store_name"}},[a("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.formValidate.store_name,callback:function(t){e.$set(e.formValidate,"store_name",t)},expression:"formValidate.store_name"}})],1)],1),e._v(" "),a("el-col",e._b({},"el-col",e.grid2,!1),[a("el-form-item",{attrs:{label:"商户商品分类：",prop:"mer_cate_id"}},[a("el-cascader",{staticClass:"selWidth",attrs:{options:e.merCateList,props:e.propsMer,filterable:"",clearable:""},model:{value:e.formValidate.mer_cate_id,callback:function(t){e.$set(e.formValidate,"mer_cate_id",t)},expression:"formValidate.mer_cate_id"}})],1)],1),e._v(" "),a("el-col",e._b({},"el-col",e.grid2,!1),[a("el-form-item",{attrs:{label:"平台商品分类：",prop:"cate_id"}},[a("el-cascader",{staticClass:"selWidth",attrs:{options:e.categoryList,props:e.props,filterable:"",clearable:""},model:{value:e.formValidate.cate_id,callback:function(t){e.$set(e.formValidate,"cate_id",t)},expression:"formValidate.cate_id"}})],1)],1),e._v(" "),a("el-col",e._b({},"el-col",e.grid2,!1),[a("el-form-item",{attrs:{label:"品牌选择：",prop:"brand_id"}},[a("el-select",{staticClass:"selWidth",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.formValidate.brand_id,callback:function(t){e.$set(e.formValidate,"brand_id",t)},expression:"formValidate.brand_id"}},e._l(e.BrandList,(function(e){return a("el-option",{key:e.brand_id,attrs:{label:e.brand_name,value:e.brand_id}})})),1)],1)],1),e._v(" "),a("el-col",e._b({},"el-col",e.grid2,!1),[a("el-form-item",{attrs:{label:"商品关键字："}},[a("el-input",{attrs:{placeholder:"请输入商品关键字"},model:{value:e.formValidate.keyword,callback:function(t){e.$set(e.formValidate,"keyword",t)},expression:"formValidate.keyword"}})],1)],1),e._v(" "),a("el-col",e._b({},"el-col",e.grid2,!1),[a("el-form-item",{attrs:{label:"单位：",prop:"unit_name"}},[a("el-input",{attrs:{placeholder:"请输入单位"},model:{value:e.formValidate.unit_name,callback:function(t){e.$set(e.formValidate,"unit_name",t)},expression:"formValidate.unit_name"}})],1)],1),e._v(" "),a("el-col",e._b({},"el-col",e.grid2,!1),[a("el-form-item",{attrs:{label:"商品简介：",prop:"store_info"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入商品简介"},model:{value:e.formValidate.store_info,callback:function(t){e.$set(e.formValidate,"store_info",t)},expression:"formValidate.store_info"}})],1)],1),e._v(" "),a("el-col",e._b({},"el-col",e.grid2,!1),[a("el-form-item",{attrs:{label:"商品封面图：",prop:"image"}},[a("div",{staticClass:"upLoadPicBox",attrs:{title:"750*750px"},on:{click:function(t){return e.modalPicTap("1")}}},[e.formValidate.image?a("div",{staticClass:"pictrue"},[a("img",{attrs:{src:e.formValidate.image}})]):a("div",{staticClass:"upLoad"},[a("i",{staticClass:"el-icon-camera cameraIconfont"})])])])],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"商品轮播图：",prop:"slider_image"}},[a("div",{staticClass:"acea-row"},[e._l(e.formValidate.slider_image,(function(t,i){return a("div",{key:i,staticClass:"pictrue",attrs:{draggable:"false"},on:{dragstart:function(a){return e.handleDragStart(a,t)},dragover:function(a){return a.preventDefault(),e.handleDragOver(a,t)},dragenter:function(a){return e.handleDragEnter(a,t)},dragend:function(a){return e.handleDragEnd(a,t)}}},[a("img",{attrs:{src:t}}),e._v(" "),a("i",{staticClass:"el-icon-error btndel",on:{click:function(t){return e.handleRemove(i)}}})])})),e._v(" "),e.formValidate.slider_image.length<10?a("div",{staticClass:"uploadCont",attrs:{title:"750*750px"}},[a("div",{staticClass:"upLoadPicBox",on:{click:function(t){return e.modalPicTap("2")}}},[a("div",{staticClass:"upLoad"},[a("i",{staticClass:"el-icon-camera cameraIconfont"})])])]):e._e()],2)])],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"主图视频：",prop:"video_link"}},[a("el-input",{staticClass:"perW50",attrs:{placeholder:"请输入视频链接"},model:{value:e.videoLink,callback:function(t){e.videoLink=t},expression:"videoLink"}}),e._v(" "),a("input",{ref:"refid",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.zh_uploadFile_change}}),e._v(" "),a("el-button",{staticClass:"uploadVideo",attrs:{type:"primary",icon:"ios-cloud-upload-outline"},on:{click:e.zh_uploadFile}},[e._v(e._s(e.videoLink?"确认添加":"上传视频"))]),e._v(" "),e.upload.videoIng?a("el-progress",{attrs:{percentage:e.progress,"text-inside":!0,"stroke-width":26}}):e._e(),e._v(" "),e.formValidate.video_link?a("div",{staticClass:"iview-video-style"},[a("video",{staticStyle:{width:"100%",height:"100%!important","border-radius":"10px"},attrs:{src:e.formValidate.video_link,controls:"controls"}},[e._v("您的浏览器不支持 video 标签。")]),e._v(" "),a("div",{staticClass:"mark"}),e._v(" "),a("i",{staticClass:"el-icon-delete iconv",on:{click:e.delVideo}})]):e._e()],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"运费模板：",prop:"temp_id"}},[a("div",{staticClass:"acea-row"},[a("el-select",{staticClass:"selWidthd mr20",attrs:{placeholder:"请选择"},model:{value:e.formValidate.temp_id,callback:function(t){e.$set(e.formValidate,"temp_id",t)},expression:"formValidate.temp_id"}},e._l(e.shippingList,(function(e){return a("el-option",{key:e.shipping_template_id,attrs:{label:e.name,value:e.shipping_template_id}})})),1),e._v(" "),a("el-button",{staticClass:"mr15",attrs:{size:"small"},on:{click:e.addTem}},[e._v("添加运费模板")])],1)])],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"proCoupon",attrs:{label:"优惠券："}},[a("div",{staticClass:"acea-row"},[e._l(e.formValidate.couponData,(function(t,i){return a("el-tag",{key:i,staticClass:"mr10",attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleCloseCoupon(t)}}},[e._v(e._s(t.title))])})),e._v(" "),a("el-button",{staticClass:"mr15",attrs:{size:"mini"},on:{click:e.addCoupon}},[e._v("选择优惠券")])],2)])],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.currentTab,expression:"currentTab === 1"}]},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"商品详情："}},[a("vue-ueditor-wrap",{attrs:{config:e.myConfig},on:{beforeInit:e.addCustomDialog},model:{value:e.formValidate.content,callback:function(t){e.$set(e.formValidate,"content",t)},expression:"formValidate.content"}})],1)],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:2===e.currentTab,expression:"currentTab === 2"}]},[a("el-col",{attrs:{span:24}},[a("el-col",e._b({},"el-col",e.grid,!1),[a("el-form-item",{attrs:{label:"排序："}},[a("el-input-number",{attrs:{placeholder:"请输入排序"},model:{value:e.formValidate.sort,callback:function(t){e.$set(e.formValidate,"sort",t)},expression:"formValidate.sort"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"商品推荐："}},[a("el-checkbox-group",{attrs:{size:"small"},on:{change:e.onChangeGroup},model:{value:e.checkboxGroup,callback:function(t){e.checkboxGroup=t},expression:"checkboxGroup"}},e._l(e.recommend,(function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"是否开启礼包："}},[a("el-radio-group",{attrs:{disabled:!!e.$route.params.id},model:{value:e.formValidate.is_gift_bag,callback:function(t){e.$set(e.formValidate,"is_gift_bag",t)},expression:"formValidate.is_gift_bag"}},[a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("否")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1)],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:3===e.currentTab,expression:"currentTab === 3"}]},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"商品规格：",props:"spec_type"}},[a("el-radio-group",{on:{change:function(t){return e.onChangeSpec(e.formValidate.spec_type)}},model:{value:e.formValidate.spec_type,callback:function(t){e.$set(e.formValidate,"spec_type",t)},expression:"formValidate.spec_type"}},[a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("单规格")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("多规格")])],1)],1),e._v(" "),e.extensionStatus>0?a("el-form-item",{attrs:{label:"佣金设置：",props:"extension_type"}},[a("el-radio-group",{on:{change:function(t){return e.onChangetype(e.formValidate.extension_type)}},model:{value:e.formValidate.extension_type,callback:function(t){e.$set(e.formValidate,"extension_type",t)},expression:"formValidate.extension_type"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("单独设置")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("默认设置")])],1)],1):e._e()],1),e._v(" "),1===e.formValidate.spec_type?a("el-col",{staticClass:"noForm",attrs:{span:24}},[a("el-form-item",{attrs:{label:"选择规格："}},[a("div",{staticClass:"acea-row"},[a("el-select",{model:{value:e.selectRule,callback:function(t){e.selectRule=t},expression:"selectRule"}},e._l(e.ruleList,(function(e){return a("el-option",{key:e.attr_template_id,attrs:{label:e.template_name,value:e.attr_template_id}})})),1),e._v(" "),a("el-button",{staticClass:"mr20",attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),e._v(" "),a("el-button",{staticClass:"mr15",on:{click:e.addRule}},[e._v("添加规格模板")])],1)]),e._v(" "),e.formValidate.attr.length>0?a("el-form-item",e._l(e.formValidate.attr,(function(t,i){return a("div",{key:i},[a("div",{staticClass:"acea-row row-middle"},[a("span",{staticClass:"mr5"},[e._v(e._s(t.value))]),e._v(" "),a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.handleRemoveAttr(i)}}})]),e._v(" "),a("div",{staticClass:"rulesBox"},[e._l(t.detail,(function(i,n){return a("el-tag",{key:n,staticClass:"mb5 mr10",attrs:{closable:"",size:"medium","disable-transitions":!1},on:{close:function(a){return e.handleClose(t.detail,n)}}},[e._v(e._s(i))])})),e._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",refInFor:!0,staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return e.createAttr(t.detail.attrsVal,i)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.createAttr(t.detail.attrsVal,i)}},model:{value:t.detail.attrsVal,callback:function(a){e.$set(t.detail,"attrsVal",a)},expression:"item.detail.attrsVal"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return e.showInput(t)}}},[e._v("+ 添加")])],2)])})),0):e._e(),e._v(" "),e.isBtn?a("el-col",[a("el-col",{attrs:{xl:6,lg:9,md:9,sm:24,xs:24}},[a("el-form-item",{attrs:{label:"规格："}},[a("el-input",{attrs:{placeholder:"请输入规格"},model:{value:e.formDynamic.attrsName,callback:function(t){e.$set(e.formDynamic,"attrsName",t)},expression:"formDynamic.attrsName"}})],1)],1),e._v(" "),a("el-col",{attrs:{xl:6,lg:9,md:9,sm:24,xs:24}},[a("el-form-item",{attrs:{label:"规格值："}},[a("el-input",{attrs:{placeholder:"请输入规格值"},model:{value:e.formDynamic.attrsVal,callback:function(t){e.$set(e.formDynamic,"attrsVal",t)},expression:"formDynamic.attrsVal"}})],1)],1),e._v(" "),a("el-col",{attrs:{xl:12,lg:6,md:6,sm:24,xs:24}},[a("el-form-item",{staticClass:"noLeft"},[a("el-button",{staticClass:"mr15",attrs:{type:"primary"},on:{click:e.createAttrName}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.offAttrName}},[e._v("取消")])],1)],1)],1):e._e(),e._v(" "),e.isBtn?e._e():a("el-form-item",[a("el-button",{staticClass:"mr15",attrs:{type:"primary",icon:"md-add"},on:{click:e.addBtn}},[e._v("添加新规格")])],1)],1):e._e(),e._v(" "),1===e.formValidate.spec_type&&e.formValidate.attr.length>0?a("el-col",{staticClass:"noForm",attrs:{span:24}},[a("el-form-item",{staticClass:"labeltop",attrs:{label:"批量设置："}},[a("el-table",{staticClass:"tabNumWidth",attrs:{data:e.oneFormBatch,border:"",size:"mini"}},[a("el-table-column",{attrs:{align:"center",label:"图片","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"upLoadPicBox",attrs:{title:"750*750px"},on:{click:function(t){return e.modalPicTap("1","pi")}}},[t.row.image?a("div",{staticClass:"pictrue tabPic"},[a("img",{attrs:{src:t.row.image}})]):a("div",{staticClass:"upLoad tabPic"},[a("i",{staticClass:"el-icon-camera cameraIconfont"})])])]}}],null,!1,308183830)}),e._v(" "),e._l(e.attrValue,(function(t,i){return a("el-table-column",{key:i,attrs:{label:e.formThead[i].title,align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"priceBox",attrs:{type:"商品编号"===e.formThead[i].title?"text":"number",min:0},model:{value:t.row[i],callback:function(a){e.$set(t.row,i,a)},expression:"scope.row[iii]"}})]}}],null,!0)})})),e._v(" "),1===e.formValidate.extension_type?[a("el-table-column",{attrs:{align:"center",label:"一级返佣(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"priceBox",attrs:{type:"number",min:0},model:{value:t.row.extension_one,callback:function(a){e.$set(t.row,"extension_one",a)},expression:"scope.row.extension_one"}})]}}],null,!1,2286159726)}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"二级返佣(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"priceBox",attrs:{type:"number",min:0},model:{value:t.row.extension_two,callback:function(a){e.$set(t.row,"extension_two",a)},expression:"scope.row.extension_two"}})]}}],null,!1,4057305350)})]:e._e(),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"80"}},[[a("el-button",{staticClass:"submission",attrs:{type:"text"},on:{click:e.batchAdd}},[e._v("批量添加")])]],2)],2)],1)],1):e._e(),e._v(" "),a("el-col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[0===e.formValidate.spec_type?a("el-form-item",[a("el-table",{staticClass:"tabNumWidth",attrs:{data:e.OneattrValue,border:"",size:"mini"}},[a("el-table-column",{attrs:{align:"center",label:"图片","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"upLoadPicBox",on:{click:function(t){return e.modalPicTap("1","dan","pi")}}},[e.formValidate.image?a("div",{staticClass:"pictrue tabPic"},[a("img",{attrs:{src:t.row.image}})]):a("div",{staticClass:"upLoad tabPic"},[a("i",{staticClass:"el-icon-camera cameraIconfont"})])])]}}],null,!1,1357914119)}),e._v(" "),e._l(e.attrValue,(function(t,i){return a("el-table-column",{key:i,attrs:{label:e.formThead[i].title,align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"priceBox",attrs:{type:"商品编号"===e.formThead[i].title?"text":"number",min:0},model:{value:t.row[i],callback:function(a){e.$set(t.row,i,a)},expression:"scope.row[iii]"}})]}}],null,!0)})})),e._v(" "),1===e.formValidate.extension_type?[a("el-table-column",{attrs:{align:"center",label:"一级返佣(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"priceBox",attrs:{type:"number",min:0},model:{value:t.row.extension_one,callback:function(a){e.$set(t.row,"extension_one",a)},expression:"scope.row.extension_one"}})]}}],null,!1,2286159726)}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"二级返佣(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"priceBox",attrs:{type:"number",min:0},model:{value:t.row.extension_two,callback:function(a){e.$set(t.row,"extension_two",a)},expression:"scope.row.extension_two"}})]}}],null,!1,4057305350)})]:e._e()],2)],1):e._e(),e._v(" "),1===e.formValidate.spec_type&&e.formValidate.attr.length>0?a("el-form-item",{staticClass:"labeltop",attrs:{label:"规格列表："}},[a("el-table",{staticClass:"tabNumWidth",attrs:{data:e.ManyAttrValue,border:"",size:"mini"}},[e.manyTabDate?e._l(e.manyTabDate,(function(t,i){return a("el-table-column",{key:i,attrs:{align:"center",label:e.manyTabTit[i].title,"min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"priceBox",domProps:{textContent:e._s(t.row[i])}})]}}],null,!0)})})):e._e(),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"图片","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"upLoadPicBox",attrs:{title:"750*750px"},on:{click:function(a){return e.modalPicTap("1","duo",t.$index)}}},[t.row.image?a("div",{staticClass:"pictrue tabPic"},[a("img",{attrs:{src:t.row.image}})]):a("div",{staticClass:"upLoad tabPic"},[a("i",{staticClass:"el-icon-camera cameraIconfont"})])])]}}],null,!1,4081354531)}),e._v(" "),e._l(e.attrValue,(function(t,i){return a("el-table-column",{key:i,attrs:{label:e.formThead[i].title,align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"priceBox",attrs:{type:"商品编号"===e.formThead[i].title?"text":"number"},model:{value:t.row[i],callback:function(a){e.$set(t.row,i,a)},expression:"scope.row[iii]"}})]}}],null,!0)})})),e._v(" "),1===e.formValidate.extension_type?[a("el-table-column",{key:"1",attrs:{align:"center",label:"一级返佣(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"priceBox",attrs:{type:"number",min:0},model:{value:t.row.extension_one,callback:function(a){e.$set(t.row,"extension_one",a)},expression:"scope.row.extension_one"}})]}}],null,!1,2286159726)}),e._v(" "),a("el-table-column",{key:"2",attrs:{align:"center",label:"二级返佣(元)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"priceBox",attrs:{type:"number",min:0},model:{value:t.row.extension_two,callback:function(a){e.$set(t.row,"extension_two",a)},expression:"scope.row.extension_two"}})]}}],null,!1,4057305350)})]:e._e()],2)],1):e._e()],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"30px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTab>0,expression:"currentTab>0"}],staticClass:"submission",attrs:{type:"primary",size:"small"},on:{click:e.handleSubmitUp}},[e._v("上一步")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTab<3,expression:"currentTab<3"}],staticClass:"submission",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSubmitNest("formValidate")}}},[e._v("下一步")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3===e.currentTab||e.$route.params.id,expression:"currentTab===3 || $route.params.id"}],staticClass:"submission",attrs:{loading:e.loading,type:"primary",size:"small"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("提交")])],1)],1)],1)],1)},n=[],r=a("75fc"),o=(a("96cf"),a("3b8d")),s=a("2d63"),l=(a("7f7f"),a("bd86")),c=(a("28a5"),a("8615"),a("55dd"),a("ac6a"),a("6762"),a("2fdb"),a("ef0d")),u=a("6625"),d=a.n(u),m=a("c4c8"),f=a("83d6"),p={image:"",slider_image:[],store_name:"",store_info:"",keyword:"",brand_id:"",cate_id:"",mer_cate_id:[],unit_name:"",sort:0,is_good:0,temp_id:"",video_link:"",attrValue:[{image:"",price:null,cost:null,ot_price:null,stock:null,bar_code:"",weight:null,volume:null}],attr:[],extension_type:0,content:"",spec_type:0,give_coupon_ids:[],is_gift_bag:0,couponData:[]},h={price:{title:"售价"},cost:{title:"成本价"},ot_price:{title:"原价"},stock:{title:"库存"},bar_code:{title:"商品编号"},weight:{title:"重量（KG）"},volume:{title:"体积(m³)"}},g=[{name:"店铺推荐",value:"is_good"}],_={name:"ProductProductAdd",components:{ueditorFrom:c["a"],VueUeditorWrap:d.a},data:function(){return{myConfig:{autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/UEditor/",serverUrl:""},optionsCate:{value:"store_category_id",label:"cate_name",children:"children",emitPath:!1},roterPre:f["roterPre"],selectRule:"",checkboxGroup:[],recommend:g,tabs:[],fullscreenLoading:!1,props:{emitPath:!1},propsMer:{emitPath:!1,multiple:!0},active:0,OneattrValue:[Object.assign({},p.attrValue[0])],ManyAttrValue:[Object.assign({},p.attrValue[0])],ruleList:[],merCateList:[],categoryList:[],shippingList:[],BrandList:[],formThead:Object.assign({},h),formValidate:Object.assign({},p),picValidate:!0,formDynamics:{template_name:"",template_value:[]},manyTabTit:{},manyTabDate:{},grid2:{xl:10,lg:12,md:12,sm:24,xs:24},formDynamic:{attrsName:"",attrsVal:""},isBtn:!1,manyFormValidate:[],images:[],currentTab:0,isChoice:"",upload:{videoIng:!1},progress:10,videoLink:"",grid:{xl:8,lg:8,md:12,sm:24,xs:24},loading:!1,ruleValidate:{give_coupon_ids:[{required:!0,message:"请选择优惠券",trigger:"change",type:"array"}],store_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],mer_cate_id:[{required:!0,message:"请选择商户分类",trigger:"change",type:"array",min:"1"}],cate_id:[{required:!0,message:"请选择平台分类",trigger:"change"}],keyword:[{required:!0,message:"请输入商品关键字",trigger:"blur"}],unit_name:[{required:!0,message:"请输入单位",trigger:"blur"}],store_info:[{required:!0,message:"请输入商品简介",trigger:"blur"}],temp_id:[{required:!0,message:"请选择运费模板",trigger:"change"}],brand_id:[{required:!0,message:"请选择品牌",trigger:"change"}],image:[{required:!0,message:"请上传商品图",trigger:"change"}],slider_image:[{required:!0,message:"请上传商品轮播图",type:"array",trigger:"change"}],spec_type:[{required:!0,message:"请选择商品规格",trigger:"change"}]},attrInfo:{},keyNum:0,extensionStatus:0}},computed:{attrValue:function(){var e=Object.assign({},p.attrValue[0]);return delete e.image,e},oneFormBatch:function(){var e=[Object.assign({},p.attrValue[0])];return delete e[0].bar_code,e}},watch:{"formValidate.attr":{handler:function(e){1===this.formValidate.spec_type&&this.watCh(e)},immediate:!1,deep:!0}},created:function(){console.log(this.$route),this.tempRoute=Object.assign({},this.$route),this.$route.params.id&&1===this.formValidate.spec_type&&this.$watch("formValidate.attr",this.watCh)},mounted:function(){var e=this;this.formValidate.slider_image=[],this.$route.params.id&&(this.setTagsViewTitle(),this.getInfo()),this.formValidate.attr.map((function(t){e.$set(t,"inputVisible",!1)})),this.getCategorySelect(),this.getCategoryList(),this.getBrandListApi(),this.getShippingList(),this.productCon(),this.productGetRule()},methods:{handleCloseCoupon:function(e){var t=this;this.formValidate.couponData.splice(this.formValidate.couponData.indexOf(e),1),this.formValidate.give_coupon_ids=[],this.formValidate.couponData.map((function(e){t.formValidate.give_coupon_ids.push(e.coupon_id)}))},productCon:function(){var e=this;Object(m["x"])().then((function(t){e.extensionStatus=t.data.extension_status})).catch((function(t){e.$message.error(t.message)}))},addCoupon:function(){var e=this;this.$modalCoupon(this.formValidate.couponData,"wu",e.formValidate.give_coupon_ids,this.keyNum+=1,(function(t){e.formValidate.give_coupon_ids=[],e.formValidate.couponData=t,t.map((function(t){e.formValidate.give_coupon_ids.push(t.coupon_id)}))}))},setTagsViewTitle:function(){var e="编辑商品",t=Object.assign({},this.tempRoute,{title:"".concat(e,"-").concat(this.$route.params.id)});this.$store.dispatch("tagsView/updateVisitedView",t)},onChangeGroup:function(){this.checkboxGroup.includes("is_good")?this.formValidate.is_good=1:this.formValidate.is_good=0},watCh:function(e){var t=this,a={},i={};this.formValidate.attr.forEach((function(e,t){a["value"+t]={title:e.value},i["value"+t]=""})),console.log(this.ManyAttrValue),this.ManyAttrValue=this.attrFormat(e),this.ManyAttrValue.forEach((function(e,a){var i=Object.values(e.detail).sort().join("/");t.attrInfo[i]&&(t.ManyAttrValue[a]=t.attrInfo[i])})),this.attrInfo={},this.ManyAttrValue.forEach((function(e){"undefined"!==e.detail&&null!==e.detail&&(t.attrInfo[Object.values(e.detail).sort().join("/")]=e)})),this.manyTabTit=a,this.manyTabDate=i,this.formThead=Object.assign({},this.formThead,a),console.log(this.ManyAttrValue)},attrFormat:function(e){var t=[],a=[];return i(e);function i(e){if(e.length>1)e.forEach((function(i,n){0===n&&(t=e[n]["detail"]);var r=[];t.forEach((function(t){e[n+1]&&e[n+1]["detail"]&&e[n+1]["detail"].forEach((function(i){var o=(0!==n?"":e[n]["value"]+"_$_")+t+"-$-"+e[n+1]["value"]+"_$_"+i;if(r.push(o),n===e.length-2){var s={image:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0,brokerage:0,brokerage_two:0};o.split("-$-").forEach((function(e,t){var a=e.split("_$_");s["detail"]||(s["detail"]={}),s["detail"][a[0]]=a.length>1?a[1]:""})),Object.values(s.detail).forEach((function(e,t){s["value"+t]=e})),a.push(s)}}))})),t=r.length?r:[]}));else{var i=[];e.forEach((function(e,t){e["detail"].forEach((function(t,n){i[n]=e["value"]+"_"+t,a[n]={image:"",price:0,cost:0,ot_price:0,stock:0,bar_code:"",weight:0,volume:0,brokerage:0,brokerage_two:0,detail:Object(l["a"])({},e["value"],t)},Object.values(a[n].detail).forEach((function(e,t){a[n]["value"+t]=e}))}))})),t.push(i.join("$&"))}return a}},addTem:function(){var e=this;this.$modalTemplates(0,(function(){e.getShippingList()}))},delVideo:function(){var e=this;e.$set(e.formValidate,"video_link","")},zh_uploadFile:function(){var e=this;this.videoLink?this.formValidate.video_link=this.videoLink:this.$nextTick((function(){console.log(e.$refs.refid),e.$refs.refid.click()}))},zh_uploadFile_change:function(e){var t=this,a=e.target.files[0].name.substr(e.target.files[0].name.indexOf("."));if(".mp4"!==a)return t.$message.error("只能上传MP4文件");Object(m["E"])().then((function(a){t.$videoCloud.videoUpload({type:a.data.type,evfile:e,res:a,uploading:function(e,a){t.upload.videoIng=e,console.log(e,a)}}).then((function(e){console.log(e),t.formValidate.video_link=e.url,t.$message.success("视频上传成功")})).catch((function(e){t.$message.error(e.message)}))})).catch((function(e){t.$message.error(e.message)}))},addRule:function(){var e=this;this.$modalAttr(this.formDynamics,(function(){e.productGetRule()}))},onChangeSpec:function(e){1===e&&this.productGetRule()},confirm:function(){var e=this;if(!this.selectRule)return this.$message.warning("请选择属性");this.ruleList.forEach((function(t){t.attr_template_id===e.selectRule&&(e.formValidate.attr=t.template_value)}))},getCategorySelect:function(){var e=this;Object(m["n"])().then((function(t){e.merCateList=t.data})).catch((function(t){e.$message.error(t.message)}))},getCategoryList:function(){var e=this;Object(m["m"])().then((function(t){e.categoryList=t.data})).catch((function(t){e.$message.error(t.message)}))},getBrandListApi:function(){var e=this;Object(m["l"])().then((function(t){e.BrandList=t.data})).catch((function(t){e.$message.error(t.message)}))},productGetRule:function(){var e=this;Object(m["cb"])().then((function(t){e.ruleList=t.data}))},getShippingList:function(){var e=this;Object(m["P"])().then((function(t){e.shippingList=t.data}))},showInput:function(e){this.$set(e,"inputVisible",!0)},onChangetype:function(e){var t=this;1===e?(this.OneattrValue.map((function(e){t.$set(e,"extension_one",null),t.$set(e,"extension_two",null)})),this.ManyAttrValue.map((function(e){t.$set(e,"extension_one",null),t.$set(e,"extension_two",null)}))):(this.OneattrValue.map((function(e){delete e.extension_one,delete e.extension_two,t.$set(e,"extension_one",null),t.$set(e,"extension_two",null)})),this.ManyAttrValue.map((function(e){delete e.extension_one,delete e.extension_two})))},delAttrTable:function(e){this.ManyAttrValue.splice(e,1)},batchAdd:function(){var e,t=Object(s["a"])(this.ManyAttrValue);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.$set(a,"image",this.oneFormBatch[0].image),this.$set(a,"price",this.oneFormBatch[0].price),this.$set(a,"cost",this.oneFormBatch[0].cost),this.$set(a,"ot_price",this.oneFormBatch[0].ot_price),this.$set(a,"stock",this.oneFormBatch[0].stock),this.$set(a,"bar_code",this.oneFormBatch[0].bar_code),this.$set(a,"weight",this.oneFormBatch[0].weight),this.$set(a,"volume",this.oneFormBatch[0].volume),this.$set(a,"extension_one",this.oneFormBatch[0].extension_one),this.$set(a,"extension_two",this.oneFormBatch[0].extension_two)}}catch(i){t.e(i)}finally{t.f()}},addBtn:function(){this.clearAttr(),this.isBtn=!0},offAttrName:function(){this.isBtn=!1},clearAttr:function(){this.formDynamic.attrsName="",this.formDynamic.attrsVal=""},handleRemoveAttr:function(e){this.formValidate.attr.splice(e,1),this.manyFormValidate.splice(e,1)},handleClose:function(e,t){e.splice(t,1)},createAttrName:function(){if(this.formDynamic.attrsName&&this.formDynamic.attrsVal){var e={value:this.formDynamic.attrsName,detail:[this.formDynamic.attrsVal]};this.formValidate.attr.push(e);var t={};this.formValidate.attr=this.formValidate.attr.reduce((function(e,a){return!t[a.value]&&(t[a.value]=e.push(a)),e}),[]),this.clearAttr(),this.isBtn=!1}else this.$message.warning("请添加完整的规格！")},createAttr:function(e,t){if(e){this.formValidate.attr[t].detail.push(e);var a={};this.formValidate.attr[t].detail=this.formValidate.attr[t].detail.reduce((function(e,t){return!a[t]&&(a[t]=e.push(t)),e}),[]),this.formValidate.attr[t].inputVisible=!1}else this.$message.warning("请添加属性")},getInfo:function(){var e=this;this.fullscreenLoading=!0,Object(m["D"])(this.$route.params.id).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=a.data,e.formValidate={image:i.image,attrValue:i.attrValue,slider_image:i.slider_image,store_name:i.store_name,store_info:i.store_info,keyword:i.keyword,brand_id:i.brand_id,cate_id:i.cate_id,mer_cate_id:i.mer_cate_id,unit_name:i.unit_name,sort:i.sort,is_good:i.is_good,temp_id:i.temp_id,attr:i.attr,extension_type:i.extension_type,content:i.content,spec_type:i.spec_type,give_coupon_ids:i.give_coupon_ids,is_gift_bag:i.is_gift_bag,couponData:i.coupon,video_link:i.video_link?i.video_link:""},0===e.formValidate.spec_type?e.OneattrValue=i.attrValue:(e.ManyAttrValue=i.attrValue,e.ManyAttrValue.forEach((function(t){"undefined"!==t.detail&&null!==t.detail&&(e.attrInfo[Object.values(t.detail).sort().join("/")]=t)}))),1===e.formValidate.is_good&&e.checkboxGroup.push("is_good"),e.fullscreenLoading=!1;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.fullscreenLoading=!1,e.$message.error(t.message)}))},handleRemove:function(e){this.formValidate.slider_image.splice(e,1)},modalPicTap:function(e,t,a){var i=this,n=[];this.$modalUpload((function(r){"1"!==e||t||(i.formValidate.image=r[0],i.OneattrValue[0].image=r[0]),"2"!==e||t||r.map((function(e){n.push(e.attachment_src),i.formValidate.slider_image.push(e),i.formValidate.slider_image.length>10&&(i.formValidate.slider_image.length=10)})),"1"===e&&"dan"===t&&(i.OneattrValue[0].image=r[0]),"1"===e&&"duo"===t&&(i.ManyAttrValue[a].image=r[0]),"1"===e&&"pi"===t&&(i.oneFormBatch[0].image=r[0])}),e)},handleSubmitUp:function(){this.currentTab--<0&&(this.currentTab=0)},handleSubmitNest:function(e){var t=this;this.$refs[e].validate((function(e){e?t.currentTab++>2&&(t.currentTab=0):t.formValidate.store_name&&t.formValidate.cate_id&&t.formValidate.unit_name&&t.formValidate.store_info&&t.formValidate.image&&t.formValidate.slider_image||t.$message.warning("请填写完整商品信息！")}))},handleSubmit:function(e){var t=this;this.onChangeGroup(),1===this.formValidate.spec_type?this.formValidate.attrValue=this.ManyAttrValue:(this.formValidate.attrValue=this.OneattrValue,this.formValidate.attr=[]),this.$refs[e].validate((function(a){a?(t.fullscreenLoading=!0,t.loading=!0,t.$route.params.id&&!t.$route.query.type?Object(m["G"])(t.$route.params.id,t.formValidate).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.fullscreenLoading=!1,t.$message.success(i.message),t.$router.push({path:t.roterPre+"/product/list"}),t.$refs[e].resetFields(),t.formValidate.slider_image=[],t.loading=!1;case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){t.fullscreenLoading=!1,t.loading=!1,t.$message.error(e.message)})):Object(m["B"])(t.formValidate).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.fullscreenLoading=!1,t.$message.success(i.message),t.$router.push({path:t.roterPre+"/product/list"}),t.$refs[e].resetFields(),t.formValidate.slider_image=[],t.loading=!1;case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){t.fullscreenLoading=!1,t.loading=!1,t.$message.error(e.message)}))):t.formValidate.store_name&&t.formValidate.cate_id&&t.formValidate.unit_name&&t.formValidate.store_info&&t.formValidate.image&&t.formValidate.slider_image||t.$message.warning("请填写完整商品信息！")}))},validate:function(e,t,a){!1===t&&this.$message.warning(a)},specPicValidate:function(e){for(var t=0;t<e.length;t++)if(""===e[t].image||!e[t].image){this.$message.warning("请上传商品规格图！"),this.picValidate=!1;break}},handleDragStart:function(e,t){this.dragging=t},handleDragEnd:function(e,t){this.dragging=null},handleDragOver:function(e){e.dataTransfer.dropEffect="move"},handleDragEnter:function(e,t){if(e.dataTransfer.effectAllowed="move",t!==this.dragging){var a=Object(r["a"])(this.formValidate.slider_image),i=a.indexOf(this.dragging),n=a.indexOf(t);a.splice.apply(a,[n,0].concat(Object(r["a"])(a.splice(i,1)))),this.formValidate.slider_image=a}},addCustomDialog:function(e){window.UE.registerUI("test-dialog",(function(e,t){var a=new window.UE.ui.Dialog({iframeUrl:f["roterPre"]+"/admin/widget/image?field=dialog",editor:e,name:t,title:"上传图片",cssRules:"width:1200px;height:500px;padding:20px;"});this.dialog=a;var i=new window.UE.ui.Button({name:"dialog-button",title:"上传图片",cssRules:"background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;",onclick:function(){a.render(),a.open()}});return i}),37),window.UE.registerUI("video-dialog",(function(e,t){var a=new window.UE.ui.Dialog({iframeUrl:f["roterPre"]+"/admin/widget/video?fodder=video",editor:e,name:t,title:"上传视频",cssRules:"width:600px;height:420px;padding:10px 20px 20px;"});this.dialog=a;var i=new window.UE.ui.Button({name:"video-button",title:"上传视频",cssRules:"background-image: url(../../../assets/images/icons.png);background-position: -320px -20px;",onclick:function(){a.render(),a.open()}});return i}),38)}}},v=_,b=(a("73a5"),a("2877")),V=Object(b["a"])(v,i,n,!1,null,"ee845b26",null);t["default"]=V.exports},"504c":function(e,t,a){var i=a("9e1e"),n=a("0d58"),r=a("6821"),o=a("52a7").f;e.exports=function(e){return function(t){var a,s=r(t),l=n(s),c=l.length,u=0,d=[];while(c>u)a=l[u++],i&&!o.call(s,a)||d.push(e?[a,s[a]]:s[a]);return d}}},"73a5":function(e,t,a){"use strict";var i=a("a7f8"),n=a.n(i);n.a},8615:function(e,t,a){var i=a("5ca1"),n=a("504c")(!1);i(i.S,"Object",{values:function(e){return n(e)}})},a7f8:function(e,t,a){},ef0d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vue-ueditor-wrap",{staticStyle:{width:"90%"},attrs:{config:e.myConfig},on:{beforeInit:e.addCustomDialog},model:{value:e.contents,callback:function(t){e.contents=t},expression:"contents"}})],1)},n=[],r=a("6625"),o=a.n(r),s=a("83d6"),l={name:"Index",components:{VueUeditorWrap:o.a},scrollerHeight:{content:String,default:""},props:{content:{type:String,default:""}},data:function(){return{contents:this.content,myConfig:{autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/UEditor/",serverUrl:"http://35.201.165.105:8000/controller.php"}}},watch:{content:function(e){this.contents=this.content},contents:function(e){this.$emit("input",e)}},created:function(){},methods:{addCustomDialog:function(e){window.UE.registerUI("test-dialog",(function(e,t){var a=new window.UE.ui.Dialog({iframeUrl:s["roterPre"]+"/setting/uploadPicture?field=dialog",editor:e,name:t,title:"上传图片",cssRules:"width:1000px;height:620px;padding:20px;"});this.dialog=a;var i=new window.UE.ui.Button({name:"dialog-button",title:"上传图片",cssRules:"background-image: url(@/assets/images/icons.png);background-position: -726px -77px;",onclick:function(){a.render(),a.open()}});return i}),37)}}},c=l,u=a("2877"),d=Object(u["a"])(c,i,n,!1,null,"2ee187e6",null);t["a"]=d.exports}}]);